"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[207],{75999:function(e,t,n){n.d(t,{Z:function(){return N}});var r=n(14924),i=n(85893),o=(n(67294),n(58067)),c=n(68940),a=n(76867),s=n(79571),l=n(24242),u=n(71217),d=n(3857),h=n(11163),f=(0,o.k)((function(e){return{portalDiv:{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%,-50%)",width:400,fontSize:"1em",background:"white",color:"black",borderRadius:10,padding:10,paddingTop:0},greenText:{color:"green",fontSize:"1em"},infoText:{fontSize:".5em",fontStyle:"italic"},imgdiv:{flexGrow:1,cursor:"pointer"},imgstyle:{height:"17px"},imgmetamaskstyle:{height:50,margin:10},btncolor:{backgroundColor:"rgb(75, 141, 255)",color:"white",cursor:"pointer",borderRadius:10,fontSize:".5em",width:"45%",marginLeft:"auto !important",marginRight:"auto !important"},connectbtn:{cursor:"pointer"}}}));function g(e){var t=e.className,n=(0,d.rZ)(),r=(0,h.useRouter)(),o=f().classes,c=(0,l.o)().god;return(0,i.jsx)("div",{className:t,children:(0,i.jsxs)("div",{className:o.portalDiv,children:[(0,i.jsxs)("div",{className:o.imgdiv,onClick:function(){return r.push("https://www.elumicate.com/")},children:["dark"===n.colorScheme&&(0,i.jsx)("img",{className:o.imgstyle,src:"/images/logo/Elumicate-font-viga-black-logo-SMALL.png"}),"dark"!==n.colorScheme&&(0,i.jsx)("img",{className:o.imgstyle,src:"/images/logo/Elumicate-font-viga-white-logo-SMALL.png"})]}),(0,i.jsx)("div",{children:"Welcome to the"}),(0,i.jsx)("div",{style:{marginTop:-15},children:"Elumicate Mining Portal"}),(0,i.jsx)("div",{className:o.greenText,children:"Ready to start Mining?"}),(0,i.jsx)("div",{style:{height:10}}),(0,i.jsxs)("div",{className:o.infoText,children:[(0,i.jsx)("div",{children:"In order to view the portal you must have"}),(0,i.jsx)("div",{children:"a Metamask Wallet installed and"}),(0,i.jsx)("div",{children:"connected to the IoTex testnet."}),(0,i.jsx)("div",{className:o.connectbtn,onClick:function(){return c.setShowConnecter(!0)},children:(0,i.jsx)("img",{className:o.imgmetamaskstyle,src:"/images/logo/metamask.png"})}),(0,i.jsx)("div",{children:"You can find full details on how to get"}),(0,i.jsx)("div",{children:"started here."})]}),(0,i.jsx)("div",{className:o.btncolor,onClick:function(){r.push("https://whitepaper.elumicate.com/user-experience/testnet-onboarding")},children:"Open Whitepaper"})]})})}var m="@media (max-width: 755px)",p=(0,o.k)((function(e){return{wrapper:{position:"relative",boxSizing:"border-box",backgroundColor:"dark"===e.colorScheme?e.colors.dark[8]:"#ffffffdb",boxShadow:"dark"===e.colorScheme?"0px 0px 6px 6px #00000030":"0px 0px 6px 6px #ffffffdb"},inner:{position:"relative",paddingLeft:0,paddingRight:0,maxWidth:"none"},title:(0,r.Z)({fontFamily:"Proxima-Nova, ".concat(e.fontFamily),fontSize:62,fontWeight:900,lineHeight:1.1,margin:0,padding:0,color:"dark"===e.colorScheme?e.white:e.black},m,{fontSize:42,lineHeight:1.2}),description:(0,r.Z)({marginTop:e.spacing.xl,fontSize:24},m,{fontSize:18}),controls:(0,r.Z)({marginTop:2*e.spacing.xl},m,{marginTop:e.spacing.xl}),control:(0,r.Z)({height:54,paddingLeft:38,paddingRight:38},m,{height:54,paddingLeft:18,paddingRight:18,flex:1}),githubControl:{borderWidth:2,borderColor:"dark"===e.colorScheme?"transparent":e.colors.dark[9],backgroundColor:"dark"===e.colorScheme?e.colors.dark[5]:"transparent","&:hover":{backgroundColor:"".concat("dark"===e.colorScheme?e.colors.dark[6]:e.colors.gray[0]," !important")}},paddingLeft:{paddingLeft:"36px"},loginMsgDiv:{width:"100%",height:"100%",fontSize:"2em",fontWeight:"bold",textAlign:"center"}}})),x=(c.O,(0,u.Pi)((function(e){var t=e.children,n=p().classes,r=(0,l.o)().god,o=((0,u.fv)((function(){return{showConnecter:function(){r.setShowConnecter(!0)},showWalletInfo:function(){r.currentNetwork.walletInfo.visible=!0},currentAvatar:1}})),(0,i.jsx)(u.Qj,{children:function(){return(0,i.jsx)(s.C,{children:(0,i.jsx)("div",{className:n.wrapper,children:(0,i.jsx)(a.W,{className:n.inner,children:r.currentNetwork.account?t:(0,i.jsx)(g,{className:n.loginMsgDiv})})})})}}));return(0,i.jsx)(i.Fragment,{children:o})})));x.displayName="HeroTitle";var N=x},2207:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var r=n(47568),i=n(34051),o=n.n(i),c=n(85893),a=n(75999),s=n(58067),l=n(91142),u=n(88852),d=n(55910),h=n(33331),f=n(24242),g=n(9669),m=n.n(g),p=n(86455),x=n.n(p),N=n(31037),b=n(59411),j=n(67294),v=n(1686),k=n(71217),w=n(55649),S=n(94184),y=n.n(S),C=n(44868),T=h.m.BACKEND_URL,E=(0,s.k)((function(e){return{NFTTable:{background:"white",color:"black",width:"100%"},thead:{borderBottom:"1px solid black"},orange:{backgroundColor:"rgb(255, 102, 0)"},th:{borderBottom:"1px solid black"},center:{textAlign:"center"},green:{color:"green"}}})),_=(0,k.Pi)((function(e){var t=E().classes,n=(0,f.o)(),r=n.auth,i=(n.god,(0,j.useState)(0)),o=i[0],a=i[1],s=(0,j.useState)(0),l=s[0],u=s[1],d=(0,j.useState)(0),h=d[0],g=d[1],m=(0,j.useState)("0"),p=m[0],x=m[1];return(0,j.useEffect)((function(){r.$().get("".concat(T,"/api/epoch/status")).then((function(e){var t=e.data;a(t.data.duration),u(t.data.miner),g(t.data.weight),console.log("getInformation",t),x((0,C.SF)(BigInt(t.data.reward)).toString())})).catch((function(e){a(0),u(0),g(0),x("0"),console.log("getInformation error",e)}))}),[]),(0,c.jsx)(v.Z,{label:"Overall Network Stats During last Epoch",headerClass:t.orange,children:(0,c.jsxs)("table",{className:t.NFTTable,children:[(0,c.jsx)("thead",{className:t.thead,children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:t.th,children:"Epoch Duration"},"1"),(0,c.jsx)("th",{className:t.th,children:"Active Miners"},"2"),(0,c.jsx)("th",{className:t.th,children:"Accumulated Weight Rating"},"3"),(0,c.jsx)("th",{className:t.th,children:"Epoch Rewards"},"4")]})}),(0,c.jsx)("tbody",{children:(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{className:y()(t.center,t.green),children:[o/60," Minutes"]},"1"),(0,c.jsx)("td",{className:t.center,children:l},"2"),(0,c.jsx)("td",{className:t.center,children:Math.round(h/3600*100)/100},"3"),(0,c.jsxs)("td",{className:t.center,children:[p," ELUM"]},"4")]})})]})})})),M=n(49497),F=n(92386),I=(0,s.k)((function(e){return{header:{color:"white",backgroundColor:"rgb(106, 106, 106)",fontSize:".9rem",textAlign:"center",marginBottom:2,whiteSpace:"nowrap"},elum:{fontSize:".9rem",textAlign:"center",marginTop:2,whiteSpace:"nowrap"}}})),L=(0,k.Pi)((function(e){var t=I().classes;return(0,c.jsxs)("div",{children:[(0,c.jsx)(F.Z,{label:e.label,className:t.header}),(0,c.jsx)(F.Z,{label:e.token,className:t.elum})]})})),R=h.m.BACKEND_URL,A=(0,s.k)((function(e){return{NFTTable:{background:"white",color:"black",width:"100%"},thead:{borderBottom:"1px solid black"},orange:{backgroundColor:"rgb(255, 102, 0)"},th:{borderBottom:"1px solid black"},center:{textAlign:"center"},green:{color:"green"},centerAlign:{display:"flex",alignItems:"center",justifyContent:"center",height:"36px"},imgStyle:{height:30,transform:"translate(0px, 2px)"},minerName:{position:"absolute",top:3,paddingRight:5,backgroundColor:"black",left:8,display:"flex",alignItems:"center",justifyContent:"center"},body:{display:"flex",width:"100%"},leftChild:{flexGrow:1,flexShrink:1},rightChild:{width:130,marginLeft:10}}})),B=(0,k.Pi)((function(e){var t=(0,f.o)().auth,n=A().classes,i=(0,j.useState)(!1),a=(i[0],i[1]),s=(0,j.useState)(""),l=s[0],u=s[1];(0,j.useEffect)((function(){var n=function(){var n=(0,r.Z)(o().mark((function n(){var r,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$().post("".concat(R,"/api/nft_auth/status"),{nft_id:e.nft_id});case 2:r=n.sent,console.log("nft_info",r),i=r.data.data,u((i.miner?i.miner:"Not set")+"("+i.nft_id+")");case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e.nft_id]);return(0,c.jsx)(v.Z,{label:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:n.centerAlign,children:(0,c.jsx)("span",{children:"Historical Rewards"})}),(0,c.jsxs)("div",{className:n.minerName,children:[(0,c.jsx)("img",{src:"/images/status/working.png",className:n.imgStyle}),l]})]}),children:(0,c.jsxs)("div",{className:n.body,children:[(0,c.jsx)("div",{className:n.leftChild,children:(0,c.jsx)(M.x,{sx:{height:"180px",width:"100%"},onScrollPositionChange:function(e){var t=e.y;return a(0!==t)},children:(0,c.jsxs)("table",{className:n.NFTTable,children:[(0,c.jsx)("thead",{className:n.thead,children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:n.th,children:"Epoch Time"},"1"),(0,c.jsx)("th",{className:n.th,children:"Mining Time"},"2"),(0,c.jsx)("th",{className:n.th,children:"Multiplier"},"3"),(0,c.jsx)("th",{className:n.th,children:"Epoch Reward"},"4")]})}),(0,c.jsx)("tbody",{children:e.info.map((function(e,t){return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:y()(n.center,n.green),children:(0,C.t3)(e.epoch)},"1"),(0,c.jsxs)("td",{className:n.center,children:[e.uptime/60," Minutes"]},"2"),(0,c.jsxs)("td",{className:n.center,children:["X ",e.multiplier/1e4]},"3"),(0,c.jsxs)("td",{className:n.center,children:[null==e.reward?0:(0,C.SF)(BigInt(e.reward))," ELUM"]},"4")]},t)}))})]})})}),(0,c.jsxs)("div",{className:n.rightChild,children:[(0,c.jsx)(L,{label:"Past Week",token:e.history[0]}),(0,c.jsx)("div",{style:{height:2}}),(0,c.jsx)(L,{label:"Past Month",token:e.history[1]}),(0,c.jsx)("div",{style:{height:2}}),(0,c.jsx)(L,{label:"Past Year",token:e.history[2]})]})]})})})),D=h.m.BACKEND_URL,Z=(0,s.k)((function(e){return{}})),z=(0,k.Pi)((function(e){Z().classes;var t=(0,f.o)(),n=t.god,r=t.auth,i=(0,j.useState)([]),o=i[0],a=i[1];return(0,j.useEffect)((function(){r.$().post("".concat(D,"/api/device_uptime/getUpTimeInfo"),{address:n.currentNetwork.account}).then((function(e){var t=e.data,n=t.data,r={};n.forEach((function(e){null==r[e.nft_id]&&(r[e.nft_id]={},r[e.nft_id].list=[],r[e.nft_id].history=[]),r[e.nft_id].list.push(e)})),t.rewardHistory.data.forEach((function(e){e.forEach((function(e){void 0!=r[e.nft_id]&&r[e.nft_id].history.push(parseInt(e.reward_info)/Math.pow(10,t.rewardHistory.precision))}))})),a(Object.keys(r).map((function(e){return{nft_id:e,info:r[e].list.sort((function(e,t){return t.epoch-e.epoch})),history:r[e].history}})))})).catch((function(e){console.error(e)}))}),[n.currentNetwork.account]),(0,c.jsx)(c.Fragment,{children:o.map((function(e){return(0,c.jsx)(B,{nft_id:e.nft_id,info:e.info,history:e.history})}))})})),P=(n(18699).getWindow().ethereum,h.m.BACKEND_URL),W=(0,s.k)((function(e){return{progressBar:{"&:not(:first-of-type)":{borderLeft:"3px solid ".concat("dark"===e.colorScheme?e.colors.dark[7]:e.white)}},NFTTable:{background:"white",color:"black",width:"100%"},green:{color:"green"},center:{textAlign:"center"},button:{marginLeft:10,marginRight:10},thead:{borderBottom:"1px solid black"},th:{borderBottom:"1px solid black"},btn_th:{width:110}}})),O=(0,k.Pi)((function(){var e=W().classes,t=(0,f.o)(),n=t.god,i=t.auth,s=t.nft,g=(0,j.useState)(!1),p=g[0],k=g[1],S=(0,j.useState)([]),y=(S[0],S[1]),C=(0,j.useState)([]),T=C[0],E=C[1],M=(0,j.useState)(""),F=M[0],I=M[1],L=(0,j.useState)(null),R=L[0],A=L[1];(0,j.useEffect)((function(){s.refresh()}),[n.currentNetwork.account]);var B=function(){var e="".concat(h.m.DEVICE_URL,"/get_status");m().get(e).then((function(e){var t=e.data;"an error has occured"==t.message?I(""):i.$().post("".concat(P,"/api/nft_auth/verifySignature"),{signature:t.signature}).then((function(e){"OK"===e.data.status?I(""):I(t.miner)})).catch((function(e){I(t.miner)}))})).catch((function(e){I("")}))},D=function(){s.getNFTLists().then(function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,c,a,s,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t,r=[],c=0;case 3:if(!(c<n.length)){e.next=19;break}return a=n[c].toString(),e.prev=5,e.next=8,i.$().post("".concat(P,"/api/nft_auth/status"),{nft_id:a});case 8:s=e.sent,l=s.data.data,r.push({NFT:l.nft_id,Miner:l.miner?l.miner:"Not set",Connection:l.session?"Assigned":"Not assigned"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),r.push({NFT:parseInt(a),Miner:"Not assigned",Connection:"Not assigned"});case 16:c++,e.next=3;break;case 19:E(r);case 20:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){y([])}))},Z=function(){D(),B()};(0,j.useEffect)((function(){B()}),[n.currentNetwork.account]),(0,j.useEffect)((function(){var e=setInterval((function(){B()}),2e3);return function(){clearInterval(e)}}),[]),(0,j.useEffect)((function(){D()}),[n.currentNetwork.account]);var O=function(){var e=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.Kt,e.prev=1,e.next=4,n.currentNetwork.execContract({address:t,abi:N.Mt,method:"balanceOf",params:[n.currentNetwork.account]});case 4:if(!(e.sent[0]>0)){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();(0,j.useEffect)((function(){O().then((function(e){k(!0)})).catch((function(e){k(!1)}))}),[n.currentNetwork.account]);var U=function(){return T.filter((function(e){return"Not assigned"==e.Connection})).map((function(e){return{value:e.NFT.toString(),label:"NFT "+e.NFT.toString(),group:"Testnet Miner"}}))},K=function(){var e=U();return 0==e.length?"-1":e[0].value};return s.loading?(0,c.jsx)(a.Z,{children:(0,c.jsx)(l.a,{})}):(0,c.jsxs)(a.Z,{children:[(0,c.jsxs)("div",{style:{display:"flex"},children:[(0,c.jsx)(w.Ph,{placeholder:s.infoList.length>0?"Choose NFT to ":"No NFTs to assign",data:U(),defaultValue:K(),style:{marginRight:10},onChange:A},K()),(0,c.jsx)(u.z,{style:{marginBottom:"10px"},onClick:function(){if(!1!==p){var e=R;if(null==e&&"-1"!=K()&&(e=K()),null!=e){var t=function(){i.$().post("".concat(P,"/api/nft_auth/create"),{address:n.currentNetwork.account,nft_id:e,miner:F}).then((function(t){if("success"==t.data.status){x().fire({title:"Success",html:"<p>Secure Miner Connection Success</p>",icon:"success"}),Z();var r="".concat(h.m.DEVICE_URL,"/set_signature"),i=n.currentNetwork.account,o=e,c=t.data.camera.link,a="P"+(t.data.camera.tableid+1)+t.data.camera.id;m().post(r,{signature:t.data.session,nftID:o,wallet:i,link:c,location_id:a},{})}else x().fire({title:"Error",html:"<p>No assignable miners</p>",icon:"error"})})).catch((function(e){x().fire({title:"Error",html:"<p>Errors occured while securing miner connection</p>",icon:"error"})}))};i.check_auth((function(){t()}),(function(){x().fire({title:"Error",html:"<p>You need to login to secure miner connection.</p>",icon:"error",showCancelButton:!0}).then((function(e){e.isConfirmed&&i.login((function(){t()}),(function(){x().fire({title:"Error",html:"<p>Errors Occured while login.</p>",icon:"error"})}))})).catch((function(){x().fire({title:"Info",html:"<p>Securing Miner Connection has been failed.</p>",icon:"info"})}))}))}else x().fire("Info","<p>You need to choose an NFT to secure your Mining Connection.</p>","info")}else x().fire("Error",'<p>You do not have an NFT to secure your Mining Connection.</p>\n                 <p>Please obtain a mining NFT and try again.</p>\n                 <p><a href="/nft/">Buy NFT</a></p>',"warning")},rightIcon:(0,c.jsx)(d.Z,{size:18}),disabled:""===F,sx:{paddingRight:12},children:""!==F?"Secure ".concat(F," Connection"):"Secure Connection"})]}),(0,c.jsx)(v.Z,{label:"My Miners",children:(0,c.jsxs)("table",{className:e.NFTTable,children:[(0,c.jsx)("thead",{className:e.thead,children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:e.th,children:"Miner Name"},"1"),(0,c.jsx)("th",{className:e.th,children:"NFT Status"},"2"),(0,c.jsx)("th",{className:e.th,children:"NFT ID"},"3"),(0,c.jsx)("th",{className:"".concat(e.th," ").concat(e.btn_th),children:"\xa0\xa0"},"4")]})}),(0,c.jsx)("tbody",{children:0==T.length?(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:4,rowSpan:1,style:{textAlign:"center"},children:"No miners currently assigned."})},0):T.map((function(t,r){return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:e.center,children:t.Miner},"1"),(0,c.jsx)("td",{className:"".concat(e.green," ").concat(e.center),children:t.Connection},"2"),(0,c.jsx)("td",{className:"".concat(e.green," ").concat(e.center),children:(0,c.jsx)("div",{children:t.NFT})},"3"),(0,c.jsx)("td",{children:(0,c.jsx)("div",{children:"Assigned"===t.Connection&&(0,c.jsx)(u.z,{onClick:function(){return function(e){var t=function(){i.$().post("".concat(P,"/api/nft_auth/remove"),{address:n.currentNetwork.account,nft_id:e}).then((function(e){"success"===e.data.status?(x().fire({title:"Success",html:"<p>Connection Removed!</p>",icon:"success"}),Z()):x().fire({title:"Error",html:"<p>Errors Occured while removing connection.</p>",icon:"error"})})).catch((function(e){x().fire({title:"Error",html:"<p>Errors Occured while removing connection.</p>",icon:"error"})}))};i.check_auth((function(){t()}),(function(){x().fire({title:"Error",html:"<p>You need to login to secure miner connection.</p>",icon:"error",showCancelButton:!0}).then((function(e){e.isConfirmed&&i.login((function(){t()}),(function(){x().fire({title:"Error",html:"<p>Errors Occured while login.</p>",icon:"error"})}))})).catch((function(){x().fire({title:"Info",html:"<p>Securing Miner Connection has been failed.</p>",icon:"info"})}))}))}(t.NFT)},className:e.button,size:"xs",children:"Remove Miner"})})})]},r)}))})]})}),(0,c.jsx)(_,{}),(0,c.jsx)(z,{})]})}))},44868:function(e,t,n){n.d(t,{Cm:function(){return o},Hk:function(){return l},MZ:function(){return s},SF:function(){return c},WJ:function(){return d},mr:function(){return u},t3:function(){return a}});var r=n(59411),i=n(33331).m.TOKEN_UNIT;function o(e){return e.substring(0,6)+"..."+e.substring(e.length-4)}function c(e){return parseInt((e/(i/BigInt(1e4))).toString())/1e4}function a(e){var t=new Date(3600*e*1e3),n=new Date(3600*(e+1)*1e3);new Date;return t.toLocaleTimeString()+" - "+n.toLocaleTimeString()}function s(){return o(r.Kt)}function l(e){return new Date(1e3*e).toLocaleString()}function u(e){for(var t=[1,60,3600,86400],n=["s","m","h","d"],r=[],i=t.length-1;i>=0;i--)r[i]=Math.floor(e/t[i]),e-=r[i]*t[i];for(var o=0,c="",a=t.length-1;a>=0&&!(r[a]>0&&(c+="".concat(r[a]).concat(n[a]),2==++o));a--);return""==c&&(c="0s"),c}function d(e){return e/100+"%"}}}]);