"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{1686:function(n,e,t){t.d(e,{Z:function(){return i}});var r=t(85893),o=(0,t(58067).k)((function(n){return{root:{display:"flex",flexDirection:"column",height:"100%"},header:{backgroundColor:"dark"==n.colorScheme?"#0887BF":"#26BCFF",border:"0px",borderRadius:"6px",color:"white",alignItems:"center",justifyContent:"center",display:"flex",fontWeight:"bold",zIndex:100,position:"relative",height:"36px"},body:{marginTop:"-8px",backgroundColor:"dark"===n.colorScheme?"black":"#DBDBDB",borderWidth:"0px",color:"black",alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column",padding:"10px",paddingTop:"18px",borderRadius:"6px",flexGrow:1},secondMargin:{marginTop:"5px"}}}));function i(n){var e=n.label,t=n.children,i=o().classes;return(0,r.jsxs)("div",{className:i.root,children:[(0,r.jsx)("div",{className:i.header,children:(0,r.jsx)("div",{children:e})}),(0,r.jsx)("div",{className:i.body,children:t})]})}},75999:function(n,e,t){t.d(e,{Z:function(){return g}});var r=t(14924),o=t(85893),i=(t(67294),t(58067)),c=t(68940),a=t(76867),s=t(5074),l=t(45698),d=t(71217);function u(n){var e=n.className;return(0,o.jsxs)("div",{className:e,children:["Welcome to the Elumicate Mining Portal!",(0,o.jsx)("br",{}),"Please login and connect to Metamask to access the site."]})}var h="@media (max-width: 755px)",f=(0,i.k)((function(n){return{wrapper:{position:"relative",boxSizing:"border-box",backgroundColor:"dark"===n.colorScheme?n.colors.dark[8]:"#ffffffdb",boxShadow:"dark"===n.colorScheme?"0px 0px 6px 6px #00000030":"0px 0px 6px 6px #ffffffdb"},inner:{position:"relative",paddingLeft:0,paddingRight:0,maxWidth:"none"},title:(0,r.Z)({fontFamily:"Proxima-Nova, ".concat(n.fontFamily),fontSize:62,fontWeight:900,lineHeight:1.1,margin:0,padding:0,color:"dark"===n.colorScheme?n.white:n.black},h,{fontSize:42,lineHeight:1.2}),description:(0,r.Z)({marginTop:n.spacing.xl,fontSize:24},h,{fontSize:18}),controls:(0,r.Z)({marginTop:2*n.spacing.xl},h,{marginTop:n.spacing.xl}),control:(0,r.Z)({height:54,paddingLeft:38,paddingRight:38},h,{height:54,paddingLeft:18,paddingRight:18,flex:1}),githubControl:{borderWidth:2,borderColor:"dark"===n.colorScheme?"transparent":n.colors.dark[9],backgroundColor:"dark"===n.colorScheme?n.colors.dark[5]:"transparent","&:hover":{backgroundColor:"".concat("dark"===n.colorScheme?n.colors.dark[6]:n.colors.gray[0]," !important")}},paddingLeft:{paddingLeft:"36px"},loginMsgDiv:{width:"100%",height:"100%",fontSize:"2em",fontWeight:"bold",textAlign:"center"}}})),p=(c.O,(0,d.Pi)((function(n){var e=n.children,t=f().classes,r=(0,l.o)().god,i=((0,d.fv)((function(){return{showConnecter:function(){r.setShowConnecter(!0)},showWalletInfo:function(){r.currentNetwork.walletInfo.visible=!0},currentAvatar:1}})),(0,o.jsx)(d.Qj,{children:function(){return(0,o.jsx)(s.C,{children:(0,o.jsx)("div",{className:t.wrapper,children:(0,o.jsx)(a.W,{className:t.inner,children:r.currentNetwork.account?e:(0,o.jsx)(u,{className:t.loginMsgDiv})})})})}}));return(0,o.jsx)(o.Fragment,{children:i})})));p.displayName="HeroTitle";var g=p},25901:function(n,e,t){t.r(e),t.d(e,{default:function(){return y}});var r=t(47568),o=t(34051),i=t.n(o),c=t(85893),a=t(75999),s=t(58067),l=t(88852),d=t(22581),u=t(67294),h=["size","color"];function f(n){var e=n.size,t=void 0===e?24:e,r=n.color,o=void 0===r?"currentColor":r,i=(0,d.Kd)(n,h);return u.createElement("svg",(0,d.gY)({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-send",width:t,height:t,viewBox:"0 0 24 24",stroke:o,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},i),u.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),u.createElement("line",{x1:"10",y1:"14",x2:"21",y2:"3"}),u.createElement("path",{d:"M21 3l-6.5 18a0.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a0.55 .55 0 0 1 0 -1l18 -6.5"}))}var p=t(33331),g=t(45698),m=t(9669),x=t.n(m),b=t(86455),k=t.n(b),v=t(933),w=t(59411),N=t(1686),C=t(44868),j=t(71217),S=(t(18699).getWindow().ethereum,p.m.BACKEND_URL),E=(0,s.k)((function(n){return{progressBar:{"&:not(:first-of-type)":{borderLeft:"3px solid ".concat("dark"===n.colorScheme?n.colors.dark[7]:n.white)}},NFTTable:{background:"white",color:"black",width:"100%"},green:{color:"green"},center:{textAlign:"center"},button:{color:"black",borderColor:"black",marginLeft:10,marginRight:10},thead:{borderBottom:"1px solid black"},th:{borderBottom:"1px solid black"}}})),y=(0,j.Pi)((function(){var n=E().classes,e=(0,g.o)(),t=e.god,o=e.auth,s=e.nft,d=(0,u.useState)(!1),h=d[0],m=d[1],b=(0,u.useState)([]),j=(b[0],b[1]),y=(0,u.useState)([]),T=y[0],M=y[1],F=(0,u.useState)(""),_=F[0],L=F[1],z=(0,u.useState)(""),B=(z[0],z[1]),I=function(){var n="".concat(p.m.DEVICE_URL,"/get_status");x().get(n).then((function(n){var e=n.data;"an error has occured"==e.message?k().fire({title:"Warning",html:"<p>Mining software returns error message.</p>",icon:"warning"}):(L(e.miner),B(e.signature))})).catch((function(n){k().fire({title:"Info",html:"<p>Cannot detect local mining software information.</p>",icon:"info"})}))},D=function(){s.getNFTLists().then((function(n){j(n);var e=[];n.forEach((function(n){e.push({NFT:n,Miner:"Loading",Connection:"Loading"})})),M((function(n){return e})),n.forEach((function(n){o.$().post("".concat(S,"/api/nft_auth/status"),{nft_id:n}).then((function(n){console.log("data",n.data.data),M([{NFT:n.data.data.nft_id,Miner:n.data.data.miner?n.data.data.miner:"Not set",Connection:n.data.data.session?"Assigned":"Not assigned"}])})).catch((function(n){console.log(n)}))}))})).catch((function(n){j([])}))},R=function(){D(),I()};(0,u.useEffect)((function(){I()}),[t.currentNetwork.account]),(0,u.useEffect)((function(){D()}),[t.currentNetwork.account]);var W=function(){var n=(0,r.Z)(i().mark((function n(){var e;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=w.Sm,n.prev=1,n.next=4,t.currentNetwork.execContract({address:e,abi:v.Mt,method:"balanceOf",params:[t.currentNetwork.account]});case 4:if(!(n.sent[0]>0)){n.next=7;break}return n.abrupt("return",!0);case 7:return n.abrupt("return",!1);case 10:return n.prev=10,n.t0=n.catch(1),n.abrupt("return",!1);case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(){return n.apply(this,arguments)}}();(0,u.useEffect)((function(){W().then((function(n){m(!0)})).catch((function(n){m(!1)}))}),[t.currentNetwork.account]);return(0,c.jsxs)(a.Z,{children:[(0,c.jsx)(l.z,{style:{marginBottom:"10px"},onClick:function(){if(!1!==h){var n=function(){o.$().post("".concat(S,"/api/nft_auth/create"),{address:t.currentNetwork.account,nft_id:(0,C.G7)(t.currentNetwork.account),miner:_}).then((function(n){k().fire({title:"Success",html:"<p>Secure Miner Connection Success</p>",icon:"success"}),R();var e="".concat(p.m.DEVICE_URL,"/set_signature"),r=t.currentNetwork.account,o=(0,C.G7)(r);x().post(e,{signature:n.data.session,nftID:o,wallet:r},{})})).catch((function(n){k().fire({title:"Error",html:"<p>Errors occured while securing miner connection</p>",icon:"error"})}))};o.check_auth((function(){n()}),(function(){k().fire({title:"Error",html:"<p>You need to login to secure miner connection.</p>",icon:"error",showCancelButton:!0}).then((function(e){e.isConfirmed&&o.login((function(){n()}),(function(){k().fire({title:"Error",html:"<p>Errors Occured while login.</p>",icon:"error"})}))})).catch((function(){k().fire({title:"Info",html:"<p>Securing Miner Connection has been failed.</p>",icon:"info"})}))}))}else k().fire("Error",'<p>You do not have an NFT to secure your Mining Connection.</p>\n                 <p>Please obtain a mining NFT and try again.</p>\n                 <p><a href="/nft/">Buy NFT</a></p>',"warning")},rightIcon:(0,c.jsx)(f,{size:18}),sx:{paddingRight:12},children:""!==_?"Secure ".concat(_," Connection"):"Secure Connection"}),(0,c.jsx)(N.Z,{label:"My Miners",children:(0,c.jsxs)("table",{className:n.NFTTable,children:[(0,c.jsx)("thead",{className:n.thead,children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:n.th,children:"Miner Name"},"1"),(0,c.jsx)("th",{className:n.th,children:"NFT Status"},"2"),(0,c.jsx)("th",{className:n.th,children:"NFT ID"},"3"),(0,c.jsx)("th",{className:n.th},"4")]})}),(0,c.jsx)("tbody",{children:T.map((function(e,r){return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:n.center,children:e.Miner},"1"),(0,c.jsx)("td",{className:"".concat(n.green," ").concat(n.center),children:e.Connection},"2"),(0,c.jsx)("td",{className:"".concat(n.green," ").concat(n.center),children:(0,c.jsx)("div",{children:e.NFT})},"3"),(0,c.jsx)("td",{children:(0,c.jsx)("div",{children:"Assigned"===e.Connection&&(0,c.jsx)(l.z,{onClick:function(){return function(n){var e=function(){o.$().post("".concat(S,"/api/nft_auth/remove"),{address:t.currentNetwork.account,nft_id:n}).then((function(n){"success"===n.data.status?(k().fire({title:"Success",html:"<p>Connection Removed!</p>",icon:"success"}),R()):k().fire({title:"Error",html:"<p>Errors Occured while removing connection.</p>",icon:"error"})})).catch((function(n){k().fire({title:"Error",html:"<p>Errors Occured while removing connection.</p>",icon:"error"})}))};o.check_auth((function(){e()}),(function(){k().fire({title:"Error",html:"<p>You need to login to secure miner connection.</p>",icon:"error",showCancelButton:!0}).then((function(n){n.isConfirmed&&o.login((function(){e()}),(function(){k().fire({title:"Error",html:"<p>Errors Occured while login.</p>",icon:"error"})}))})).catch((function(){k().fire({title:"Info",html:"<p>Securing Miner Connection has been failed.</p>",icon:"info"})}))}))}(e.NFT)},className:n.button,variant:"white",size:"xs",children:"Remove Miner"})})})]},r)}))})]})})]})}))}}]);