"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[329],{75999:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(14924),c=t(85893),i=(t(67294),t(58067)),o=t(68940),a=t(76867),s=t(79571),l=t(24242),d=t(71217);function h(e){var n=e.className;return(0,c.jsxs)("div",{className:n,children:["Welcome to the Elumicate Mining Portal!",(0,c.jsx)("br",{}),"Please login and connect to Metamask to access the site."]})}var u="@media (max-width: 755px)",f=(0,i.k)((function(e){return{wrapper:{position:"relative",boxSizing:"border-box",backgroundColor:"dark"===e.colorScheme?e.colors.dark[8]:"#ffffffdb",boxShadow:"dark"===e.colorScheme?"0px 0px 6px 6px #00000030":"0px 0px 6px 6px #ffffffdb"},inner:{position:"relative",paddingLeft:0,paddingRight:0,maxWidth:"none"},title:(0,r.Z)({fontFamily:"Proxima-Nova, ".concat(e.fontFamily),fontSize:62,fontWeight:900,lineHeight:1.1,margin:0,padding:0,color:"dark"===e.colorScheme?e.white:e.black},u,{fontSize:42,lineHeight:1.2}),description:(0,r.Z)({marginTop:e.spacing.xl,fontSize:24},u,{fontSize:18}),controls:(0,r.Z)({marginTop:2*e.spacing.xl},u,{marginTop:e.spacing.xl}),control:(0,r.Z)({height:54,paddingLeft:38,paddingRight:38},u,{height:54,paddingLeft:18,paddingRight:18,flex:1}),githubControl:{borderWidth:2,borderColor:"dark"===e.colorScheme?"transparent":e.colors.dark[9],backgroundColor:"dark"===e.colorScheme?e.colors.dark[5]:"transparent","&:hover":{backgroundColor:"".concat("dark"===e.colorScheme?e.colors.dark[6]:e.colors.gray[0]," !important")}},paddingLeft:{paddingLeft:"36px"},loginMsgDiv:{width:"100%",height:"100%",fontSize:"2em",fontWeight:"bold",textAlign:"center"}}})),m=(o.O,(0,d.Pi)((function(e){var n=e.children,t=f().classes,r=(0,l.o)().god,i=((0,d.fv)((function(){return{showConnecter:function(){r.setShowConnecter(!0)},showWalletInfo:function(){r.currentNetwork.walletInfo.visible=!0},currentAvatar:1}})),(0,c.jsx)(d.Qj,{children:function(){return(0,c.jsx)(s.C,{children:(0,c.jsx)("div",{className:t.wrapper,children:(0,c.jsx)(a.W,{className:t.inner,children:r.currentNetwork.account?n:(0,c.jsx)(h,{className:t.loginMsgDiv})})})})}}));return(0,c.jsx)(c.Fragment,{children:i})})));m.displayName="HeroTitle";var g=m},11329:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var r=t(47568),c=t(34051),i=t.n(c),o=t(85893),a=t(75999),s=t(58067),l=t(91142),d=t(88852),h=t(55910),u=t(33331),f=t(24242),m=t(9669),g=t.n(m),p=t(86455),x=t.n(p),N=t(31037),b=t(59411),j=t(67294),k=t(1686),v=t(71217),w=t(55649),C=t(94184),S=t.n(C),T=(0,s.k)((function(e){return{NFTTable:{background:"white",color:"black",width:"100%"},thead:{borderBottom:"1px solid black"},orange:{backgroundColor:"rgb(255, 102, 0)"},th:{borderBottom:"1px solid black"},center:{textAlign:"center"},green:{color:"green"}}})),E=(0,v.Pi)((function(e){var n=T().classes;return(0,o.jsx)(k.Z,{label:"Overall Network Stats",headerClass:n.orange,children:(0,o.jsxs)("table",{className:n.NFTTable,children:[(0,o.jsx)("thead",{className:n.thead,children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:n.th,children:"Epoch Duration"},"1"),(0,o.jsx)("th",{className:n.th,children:"Active Miners"},"2"),(0,o.jsx)("th",{className:n.th,children:"Accumulated Weight Rating"},"3"),(0,o.jsx)("th",{className:n.th,children:"Epoch Rewards"},"4")]})}),(0,o.jsx)("tbody",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:S()(n.center,n.green),children:"60 Minutes"},"1"),(0,o.jsx)("td",{className:n.center,children:"10,255"},"2"),(0,o.jsx)("td",{className:n.center,children:"2449.25"},"3"),(0,o.jsx)("td",{className:n.center,children:"2000 ELUM"},"4")]})})]})})})),y=(0,s.k)((function(e){return{NFTTable:{background:"white",color:"black",width:"100%"},thead:{borderBottom:"1px solid black"},orange:{backgroundColor:"rgb(255, 102, 0)"},th:{borderBottom:"1px solid black"},center:{textAlign:"center"},green:{color:"green"},centerAlign:{display:"flex",alignItems:"center",justifyContent:"center",height:"36px"},imgStyle:{height:30,transform:"translate(0px, 2px)"},minerName:{position:"absolute",top:3,paddingRight:5,backgroundColor:"black",left:8,display:"flex",alignItems:"center",justifyContent:"center"}}})),F=(0,v.Pi)((function(e){var n=y().classes;return(0,o.jsx)(k.Z,{label:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:n.centerAlign,children:(0,o.jsx)("span",{children:"Historical Rewards"})}),(0,o.jsxs)("div",{className:n.minerName,children:[(0,o.jsx)("img",{src:"/images/status/working.png",className:n.imgStyle}),"CobraKai"]})]}),children:(0,o.jsxs)("table",{className:n.NFTTable,children:[(0,o.jsx)("thead",{className:n.thead,children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:n.th,children:"Epoch Time"},"1"),(0,o.jsx)("th",{className:n.th,children:"Mining Time"},"2"),(0,o.jsx)("th",{className:n.th,children:"Multiplier"},"3"),(0,o.jsx)("th",{className:n.th,children:"Epoch Reward"},"4"),(0,o.jsx)("th",{className:n.th,children:"Total Uptime"},"4")]})}),(0,o.jsx)("tbody",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:S()(n.center,n.green),children:"10:00 am - 11:00 am"},"1"),(0,o.jsx)("td",{className:n.center,children:"20 minutes"},"2"),(0,o.jsx)("td",{className:n.center,children:"X 1.55"},"3"),(0,o.jsx)("td",{className:n.center,children:"333 ELUM"},"4"),(0,o.jsx)("td",{className:n.center,children:"10800 minutes"},"4")]})})]})})})),M=(t(18699).getWindow().ethereum,u.m.BACKEND_URL),_=(0,s.k)((function(e){return{progressBar:{"&:not(:first-of-type)":{borderLeft:"3px solid ".concat("dark"===e.colorScheme?e.colors.dark[7]:e.white)}},NFTTable:{background:"white",color:"black",width:"100%"},green:{color:"green"},center:{textAlign:"center"},button:{marginLeft:10,marginRight:10},thead:{borderBottom:"1px solid black"},th:{borderBottom:"1px solid black"},btn_th:{width:110}}})),R=(0,v.Pi)((function(){var e=_().classes,n=(0,f.o)(),t=n.god,c=n.auth,s=n.nft,m=(0,j.useState)(!1),p=m[0],v=m[1],C=(0,j.useState)([]),S=(C[0],C[1]),T=(0,j.useState)([]),y=T[0],R=T[1],I=(0,j.useState)(""),L=I[0],A=I[1],Z=(0,j.useState)(null),B=Z[0],z=Z[1];(0,j.useEffect)((function(){s.refresh()}),[t.currentNetwork.account]);var P=function(){var e="".concat(u.m.DEVICE_URL,"/get_status");g().get(e).then((function(e){var n=e.data;"an error has occured"==n.message?A(""):c.$().post("".concat(M,"/api/nft_auth/verifySignature"),{signature:n.signature}).then((function(e){"OK"===e.data.status?A(""):A(n.miner)})).catch((function(e){A(n.miner)}))})).catch((function(e){A("")}))},W=function(){s.getNFTLists().then(function(){var e=(0,r.Z)(i().mark((function e(n){var t,r,o,a,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n,r=[],o=0;case 3:if(!(o<t.length)){e.next=19;break}return a=t[o].toString(),e.prev=5,e.next=8,c.$().post("".concat(M,"/api/nft_auth/status"),{nft_id:a});case 8:s=e.sent,l=s.data.data,r.push({NFT:l.nft_id,Miner:l.miner?l.miner:"Not set",Connection:l.session?"Assigned":"Not assigned"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),r.push({NFT:parseInt(a),Miner:"Not assigned",Connection:"Not assigned"});case 16:o++,e.next=3;break;case 19:R(r);case 20:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){S([])}))},D=function(){W(),P()};(0,j.useEffect)((function(){P()}),[t.currentNetwork.account]),(0,j.useEffect)((function(){var e=setInterval((function(){P()}),2e3);return function(){clearInterval(e)}}),[]),(0,j.useEffect)((function(){W()}),[t.currentNetwork.account]);var O=function(){var e=(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.Kt,e.prev=1,e.next=4,t.currentNetwork.execContract({address:n,abi:N.Mt,method:"balanceOf",params:[t.currentNetwork.account]});case 4:if(!(e.sent[0]>0)){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();(0,j.useEffect)((function(){O().then((function(e){v(!0)})).catch((function(e){v(!1)}))}),[t.currentNetwork.account]);return s.loading?(0,o.jsx)(a.Z,{children:(0,o.jsx)(l.a,{})}):(0,o.jsxs)(a.Z,{children:[(0,o.jsxs)("div",{style:{display:"flex"},children:[(0,o.jsx)(w.Ph,{placeholder:s.infoList.length>0?"Choose NFT to ":"No NFTs to assign",data:y.filter((function(e){return"Not assigned"==e.Connection})).map((function(e,n){return{value:e.NFT.toString(),label:"NFT "+e.NFT.toString(),group:"Testnet Miner"}})),style:{marginRight:10},onChange:z}),(0,o.jsx)(d.z,{style:{marginBottom:"10px"},onClick:function(){if(!1!==p)if(null!=B){var e=function(){c.$().post("".concat(M,"/api/nft_auth/create"),{address:t.currentNetwork.account,nft_id:B,miner:L}).then((function(e){if("success"==e.data.status){x().fire({title:"Success",html:"<p>Secure Miner Connection Success</p>",icon:"success"}),D();var n="".concat(u.m.DEVICE_URL,"/set_signature"),r=t.currentNetwork.account,c=B,i=e.data.camera.link,o="P"+(e.data.camera.tableid+1)+e.data.camera.id;g().post(n,{signature:e.data.session,nftID:c,wallet:r,link:i,location_id:o},{})}else x().fire({title:"Error",html:"<p>No assignable miners</p>",icon:"error"})})).catch((function(e){x().fire({title:"Error",html:"<p>Errors occured while securing miner connection</p>",icon:"error"})}))};c.check_auth((function(){e()}),(function(){x().fire({title:"Error",html:"<p>You need to login to secure miner connection.</p>",icon:"error",showCancelButton:!0}).then((function(n){n.isConfirmed&&c.login((function(){e()}),(function(){x().fire({title:"Error",html:"<p>Errors Occured while login.</p>",icon:"error"})}))})).catch((function(){x().fire({title:"Info",html:"<p>Securing Miner Connection has been failed.</p>",icon:"info"})}))}))}else x().fire("Info","<p>You need to choose an NFT to secure your Mining Connection.</p>","info");else x().fire("Error",'<p>You do not have an NFT to secure your Mining Connection.</p>\n                 <p>Please obtain a mining NFT and try again.</p>\n                 <p><a href="/nft/">Buy NFT</a></p>',"warning")},rightIcon:(0,o.jsx)(h.Z,{size:18}),disabled:""===L,sx:{paddingRight:12},children:""!==L?"Secure ".concat(L," Connection"):"Secure Connection"})]}),(0,o.jsx)(k.Z,{label:"My Miners",children:(0,o.jsxs)("table",{className:e.NFTTable,children:[(0,o.jsx)("thead",{className:e.thead,children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:e.th,children:"Miner Name"},"1"),(0,o.jsx)("th",{className:e.th,children:"NFT Status"},"2"),(0,o.jsx)("th",{className:e.th,children:"NFT ID"},"3"),(0,o.jsx)("th",{className:"".concat(e.th," ").concat(e.btn_th),children:"\xa0\xa0"},"4")]})}),(0,o.jsx)("tbody",{children:0==y.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:4,rowSpan:1,style:{textAlign:"center"},children:"No miners currently assigned."})},0):y.map((function(n,r){return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:e.center,children:n.Miner},"1"),(0,o.jsx)("td",{className:"".concat(e.green," ").concat(e.center),children:n.Connection},"2"),(0,o.jsx)("td",{className:"".concat(e.green," ").concat(e.center),children:(0,o.jsx)("div",{children:n.NFT})},"3"),(0,o.jsx)("td",{children:(0,o.jsx)("div",{children:"Assigned"===n.Connection&&(0,o.jsx)(d.z,{onClick:function(){return function(e){var n=function(){c.$().post("".concat(M,"/api/nft_auth/remove"),{address:t.currentNetwork.account,nft_id:e}).then((function(e){"success"===e.data.status?(x().fire({title:"Success",html:"<p>Connection Removed!</p>",icon:"success"}),D()):x().fire({title:"Error",html:"<p>Errors Occured while removing connection.</p>",icon:"error"})})).catch((function(e){x().fire({title:"Error",html:"<p>Errors Occured while removing connection.</p>",icon:"error"})}))};c.check_auth((function(){n()}),(function(){x().fire({title:"Error",html:"<p>You need to login to secure miner connection.</p>",icon:"error",showCancelButton:!0}).then((function(e){e.isConfirmed&&c.login((function(){n()}),(function(){x().fire({title:"Error",html:"<p>Errors Occured while login.</p>",icon:"error"})}))})).catch((function(){x().fire({title:"Info",html:"<p>Securing Miner Connection has been failed.</p>",icon:"info"})}))}))}(n.NFT)},className:e.button,size:"xs",children:"Remove Miner"})})})]},r)}))})]})}),(0,o.jsx)(E,{}),(0,o.jsx)(F,{}),(0,o.jsx)(F,{})]})}))}}]);