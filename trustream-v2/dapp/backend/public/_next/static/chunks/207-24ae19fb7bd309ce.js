"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[207],{75999:function(e,t,n){n.d(t,{Z:function(){return T}});var r=n(14924),i=n(85893),o=n(67294),c=n(58067),a=n(68940),s=n(76867),l=n(79571),u=n(24242),d=n(71217),h=n(47568),f=n(34051),g=n.n(f),m=n(3857),p=n(11163),x=n(86455),b=n.n(x),v=n(9669),N=n.n(v),j=n(18699),w=(0,c.k)((function(e){return{portalDiv:{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%,-50%)",width:400,fontSize:"1em",background:"white",color:"black",borderRadius:10,padding:10,paddingTop:0},greenText:{color:"green",fontSize:"1em"},infoText:{fontSize:".5em",fontStyle:"italic"},imgdiv:{flexGrow:1,cursor:"pointer"},imgstyle:{height:"17px"},imgmetamaskstyle:{height:50,margin:10},btncolor:{backgroundColor:"rgb(75, 141, 255)",color:"white",cursor:"pointer",borderRadius:10,fontSize:".5em",width:"45%",marginLeft:"auto !important",marginRight:"auto !important"},connectbtn:{cursor:"pointer"}}}));function k(e){var t=e.className,n=(0,m.rZ)(),r=(0,p.useRouter)(),c=w().classes,a=(0,u.o)().god,s=(0,o.useState)(!1),l=s[0],d=s[1];return(0,o.useEffect)((function(){N().get("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js").then((function(e){})).catch((function(e){var t=function(){var e=(0,h.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("working"),e.next=3,j.isBrave();case 3:if(1!=e.sent){e.next=9;break}if(1!=l){e.next=7;break}return e.abrupt("return");case 7:b().fire("Warning","<p>Our system has detected you are currently using Brave Web Browser.</p>\n                             <p>You will need to turn Brave Shields Down or open miner.elumicate.com with a different browser.</p>","warning"),d(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t()}))}),[]),(0,i.jsx)("div",{className:t,children:(0,i.jsxs)("div",{className:c.portalDiv,children:[(0,i.jsxs)("div",{className:c.imgdiv,onClick:function(){return r.push("https://www.elumicate.com/")},children:["dark"===n.colorScheme&&(0,i.jsx)("img",{className:c.imgstyle,src:"/images/logo/Elumicate-font-viga-black-logo-SMALL.png"}),"dark"!==n.colorScheme&&(0,i.jsx)("img",{className:c.imgstyle,src:"/images/logo/Elumicate-font-viga-white-logo-SMALL.png"})]}),(0,i.jsx)("div",{children:"Welcome to the"}),(0,i.jsx)("div",{style:{marginTop:-15},children:"Elumicate Mining Portal"}),(0,i.jsx)("div",{className:c.greenText,children:"Ready to start Mining?"}),(0,i.jsx)("div",{style:{height:10}}),(0,i.jsxs)("div",{className:c.infoText,children:[(0,i.jsx)("div",{children:"In order to view the portal you must have"}),(0,i.jsx)("div",{children:"a Metamask Wallet installed and"}),(0,i.jsx)("div",{children:"connected to the IoTex testnet."}),(0,i.jsx)("div",{className:c.connectbtn,onClick:function(){return a.setShowConnecter(!0)},children:(0,i.jsx)("img",{className:c.imgmetamaskstyle,src:"/images/logo/metamask.png"})}),(0,i.jsx)("div",{children:"You can find full details on how to get"}),(0,i.jsx)("div",{children:"started here."})]}),(0,i.jsx)("div",{className:c.btncolor,onClick:function(){r.push("https://whitepaper.elumicate.com/user-experience/testnet-onboarding")},children:"Open Whitepaper"})]})})}var S="@media (max-width: 755px)",y=(0,c.k)((function(e){return{wrapper:{position:"relative",boxSizing:"border-box",backgroundColor:"dark"===e.colorScheme?e.colors.dark[8]:"#ffffffdb",boxShadow:"dark"===e.colorScheme?"0px 0px 6px 6px #00000030":"0px 0px 6px 6px #ffffffdb"},inner:{position:"relative",paddingLeft:0,paddingRight:0,maxWidth:"none"},title:(0,r.Z)({fontFamily:"Proxima-Nova, ".concat(e.fontFamily),fontSize:62,fontWeight:900,lineHeight:1.1,margin:0,padding:0,color:"dark"===e.colorScheme?e.white:e.black},S,{fontSize:42,lineHeight:1.2}),description:(0,r.Z)({marginTop:e.spacing.xl,fontSize:24},S,{fontSize:18}),controls:(0,r.Z)({marginTop:2*e.spacing.xl},S,{marginTop:e.spacing.xl}),control:(0,r.Z)({height:54,paddingLeft:38,paddingRight:38},S,{height:54,paddingLeft:18,paddingRight:18,flex:1}),githubControl:{borderWidth:2,borderColor:"dark"===e.colorScheme?"transparent":e.colors.dark[9],backgroundColor:"dark"===e.colorScheme?e.colors.dark[5]:"transparent","&:hover":{backgroundColor:"".concat("dark"===e.colorScheme?e.colors.dark[6]:e.colors.gray[0]," !important")}},paddingLeft:{paddingLeft:"36px"},loginMsgDiv:{width:"100%",height:"100%",fontSize:"2em",fontWeight:"bold",textAlign:"center"}}})),C=(a.O,(0,d.Pi)((function(e){var t=e.children,n=y().classes,r=(0,u.o)().god,o=((0,d.fv)((function(){return{showConnecter:function(){r.setShowConnecter(!0)},showWalletInfo:function(){r.currentNetwork.walletInfo.visible=!0},currentAvatar:1}})),(0,i.jsx)(d.Qj,{children:function(){return(0,i.jsx)(l.C,{children:(0,i.jsx)("div",{className:n.wrapper,children:(0,i.jsx)(s.W,{className:n.inner,children:r.currentNetwork.account?t:(0,i.jsx)(k,{className:n.loginMsgDiv})})})})}}));return(0,i.jsx)(i.Fragment,{children:o})})));C.displayName="HeroTitle";var T=C},2207:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var r=n(47568),i=n(34051),o=n.n(i),c=n(85893),a=n(75999),s=n(58067),l=n(91142),u=n(88852),d=n(55910),h=n(33331),f=n(24242),g=n(9669),m=n.n(g),p=n(86455),x=n.n(p),b=n(31037),v=n(59411),N=n(67294),j=n(1686),w=n(71217),k=n(55649),S=n(94184),y=n.n(S),C=n(44868),T=h.m.BACKEND_URL,E=(0,s.k)((function(e){return{NFTTable:{background:"white",color:"black",width:"100%"},thead:{borderBottom:"1px solid black"},orange:{backgroundColor:"rgb(255, 102, 0)"},th:{borderBottom:"1px solid black"},center:{textAlign:"center"},green:{color:"green"}}})),_=(0,w.Pi)((function(e){var t=E().classes,n=(0,f.o)(),r=n.auth,i=(n.god,(0,N.useState)(0)),o=i[0],a=i[1],s=(0,N.useState)(0),l=s[0],u=s[1],d=(0,N.useState)(0),h=d[0],g=d[1],m=(0,N.useState)("0"),p=m[0],x=m[1];return(0,N.useEffect)((function(){r.$().get("".concat(T,"/api/epoch/status")).then((function(e){var t=e.data;a(t.data.duration),u(t.data.miner),g(t.data.weight),console.log("getInformation",t),x((0,C.SF)(BigInt(t.data.reward)).toString())})).catch((function(e){a(0),u(0),g(0),x("0"),console.log("getInformation error",e)}))}),[]),(0,c.jsx)(j.Z,{label:"Overall Network Stats During last Epoch",headerClass:t.orange,children:(0,c.jsxs)("table",{className:t.NFTTable,children:[(0,c.jsx)("thead",{className:t.thead,children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:t.th,children:"Epoch Duration"},"1"),(0,c.jsx)("th",{className:t.th,children:"Active Miners"},"2"),(0,c.jsx)("th",{className:t.th,children:"Accumulated Weight Rating"},"3"),(0,c.jsx)("th",{className:t.th,children:"Epoch Rewards"},"4")]})}),(0,c.jsx)("tbody",{children:(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{className:y()(t.center,t.green),children:[o/60," Minutes"]},"1"),(0,c.jsx)("td",{className:t.center,children:l},"2"),(0,c.jsx)("td",{className:t.center,children:Math.round(h/3600*100)/100},"3"),(0,c.jsxs)("td",{className:t.center,children:[p," ELUM"]},"4")]})})]})})})),F=n(14924),M=n(49497),A=n(68129),I=n(92386),L=(0,s.k)((function(e){return{header:{color:"white",backgroundColor:"rgb(106, 106, 106)",fontSize:".9rem",textAlign:"center",marginBottom:2,whiteSpace:"nowrap"},elum:{fontSize:".9rem",textAlign:"center",marginTop:2,whiteSpace:"nowrap"}}})),R=(0,w.Pi)((function(e){var t=L().classes;return(0,c.jsxs)("div",{children:[(0,c.jsx)(I.Z,{label:e.label,className:t.header}),(0,c.jsx)(I.Z,{label:e.token,className:t.elum})]})})),B=(h.m.BACKEND_URL,(0,s.k)((function(e){return{NFTTable:{background:"white",color:"black",width:"100%"},thead:{position:"sticky",top:0,backgroundColor:e.white,transition:"box-shadow 150ms ease","&::after":{content:'""',position:"absolute",left:0,right:0,bottom:0,borderBottom:"1px solid ".concat("dark"===e.colorScheme?e.colors.dark[3]:e.colors.gray[2])}},orange:{backgroundColor:"rgb(255, 102, 0)"},th:{textAlign:"center !important",color:"black !important"},center:{textAlign:"center"},green:{color:"green"},centerAlign:{display:"flex",alignItems:"center",justifyContent:"center",height:"36px"},imgStyle:{height:30,transform:"translate(0px, 2px)"},minerName:{position:"absolute",top:3,paddingRight:5,backgroundColor:"black",left:8,display:"flex",alignItems:"center",justifyContent:"center"},body:{display:"flex",width:"100%"},leftChild:{flexGrow:1,flexShrink:1},rightChild:{width:130,marginLeft:10},scrolled:{boxShadow:e.shadows.sm}}}))),D=(0,w.Pi)((function(e){(0,f.o)().auth;var t=B(),n=t.classes,r=t.cx,i=(0,N.useState)(!1),o=i[0],a=i[1];return(0,c.jsx)(j.Z,{label:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:n.centerAlign,children:(0,c.jsx)("span",{children:"Historical Rewards"})}),(0,c.jsxs)("div",{className:n.minerName,children:[(0,c.jsx)("img",{src:"/images/status/working.png",className:n.imgStyle}),e.nft_id]})]}),children:(0,c.jsxs)("div",{className:n.body,children:[(0,c.jsx)("div",{className:n.leftChild,children:(0,c.jsx)(M.x,{sx:{height:"180px",width:"100%"},onScrollPositionChange:function(e){var t=e.y;return a(0!==t)},children:(0,c.jsxs)(A.i,{className:n.NFTTable,children:[(0,c.jsx)("thead",{className:r(n.thead,(0,F.Z)({},n.scrolled,o)),children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:n.th,children:"Epoch Time"},"1"),(0,c.jsx)("th",{className:n.th,children:"Mining Time"},"2"),(0,c.jsx)("th",{className:n.th,children:"Multiplier"},"3"),(0,c.jsx)("th",{className:n.th,children:"Epoch Reward"},"4")]})}),(0,c.jsx)("tbody",{children:e.info.map((function(e,t){return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:y()(n.center,n.green),children:(0,C.t3)(e.epoch)},"1"),(0,c.jsxs)("td",{className:n.center,children:[e.uptime/60," Minutes"]},"2"),(0,c.jsxs)("td",{className:n.center,children:["X ",e.multiplier/1e4]},"3"),(0,c.jsxs)("td",{className:n.center,children:[null==e.reward?0:(0,C.SF)(BigInt(e.reward))," ELUM"]},"4")]},t)}))})]})})}),(0,c.jsxs)("div",{className:n.rightChild,children:[(0,c.jsx)(R,{label:"Past Day",token:e.history[0]}),(0,c.jsx)("div",{style:{height:2}}),(0,c.jsx)(R,{label:"Past Week",token:e.history[1]}),(0,c.jsx)("div",{style:{height:2}}),(0,c.jsx)(R,{label:"Past Month",token:e.history[2]})]})]})})})),Z=h.m.BACKEND_URL,z=(0,s.k)((function(e){return{}})),P=(0,w.Pi)((function(e){z().classes;var t=(0,f.o)(),n=t.god,r=t.auth,i=(0,N.useState)([]),o=i[0],a=i[1];return(0,N.useEffect)((function(){r.$().post("".concat(Z,"/api/device_uptime/getUpTimeInfo"),{address:n.currentNetwork.account}).then((function(e){var t=e.data,n=t.data,r={};n.forEach((function(e){null==r[e.nft_id]&&(r[e.nft_id]={},r[e.nft_id].list=[],r[e.nft_id].history=[]),r[e.nft_id].list.push(e)})),t.rewardHistory.data.forEach((function(e){e.forEach((function(e){void 0!=r[e.nft_id]&&r[e.nft_id].history.push(parseInt(e.reward_info)/Math.pow(10,t.rewardHistory.precision))}))})),a(Object.keys(r).map((function(e){return{nft_id:e,info:r[e].list.sort((function(e,t){return t.epoch-e.epoch})),history:r[e].history}})))})).catch((function(e){console.error(e)}))}),[n.currentNetwork.account]),(0,c.jsx)(c.Fragment,{children:o.map((function(e){return(0,c.jsx)(D,{nft_id:e.nft_id,info:e.info,history:e.history})}))})})),W=(n(18699).getWindow().ethereum,h.m.BACKEND_URL),O=(0,s.k)((function(e){return{progressBar:{"&:not(:first-of-type)":{borderLeft:"3px solid ".concat("dark"===e.colorScheme?e.colors.dark[7]:e.white)}},NFTTable:{background:"white",color:"black",width:"100%"},green:{color:"green"},center:{textAlign:"center"},button:{marginLeft:10,marginRight:10},thead:{borderBottom:"1px solid black"},th:{borderBottom:"1px solid black"},btn_th:{width:110}}})),U=(0,w.Pi)((function(){var e=O().classes,t=(0,f.o)(),n=t.god,i=t.auth,s=t.nft,g=(0,N.useState)(!1),p=g[0],w=g[1],S=(0,N.useState)([]),y=S[0],C=S[1],T=(0,N.useState)(!1),E=T[0],F=T[1],M=(0,N.useState)(null),A=M[0],I=M[1];(0,N.useEffect)((function(){s.refresh()}),[n.currentNetwork.account]);var L=function(){var e="".concat(h.m.DEVICE_URL,"/get_status");m().get(e).then((function(e){var t=e.data;"an error has occured"==t.message?F(!1):i.$().post("".concat(W,"/api/nft_auth/verifySignature"),{signature:t.signature}).then((function(e){"OK"===e.data.status?F(!1):F(!0)})).catch((function(e){F(!0)}))})).catch((function(e){F(!0)}))},R=function(){s.getNFTLists().then(function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,c,a,s,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t,r=[],c=0;case 3:if(!(c<n.length)){e.next=19;break}return a=n[c].toString(),e.prev=5,e.next=8,i.$().post("".concat(W,"/api/nft_auth/status"),{nft_id:a});case 8:s=e.sent,l=s.data.data,r.push({NFT:l.nft_id,Active:l.active,Connection:l.session?"Assigned":"Not assigned"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),r.push({NFT:parseInt(a),Active:!1,Connection:"Not assigned"});case 16:c++,e.next=3;break;case 19:C(r);case 20:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){C([])}))},B=function(){R(),L()};(0,N.useEffect)((function(){L()}),[n.currentNetwork.account]),(0,N.useEffect)((function(){var e=setInterval((function(){L()}),2e3);return function(){clearInterval(e)}}),[]),(0,N.useEffect)((function(){R()}),[n.currentNetwork.account]);var D=function(){var e=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.Kt,e.prev=1,e.next=4,n.currentNetwork.execContract({address:t,abi:b.Mt,method:"balanceOf",params:[n.currentNetwork.account]});case 4:if(!(e.sent[0]>0)){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();(0,N.useEffect)((function(){D().then((function(e){w(!0)})).catch((function(e){w(!1)}))}),[n.currentNetwork.account]);var Z=function(){return y.filter((function(e){return"Not assigned"==e.Connection})).map((function(e){return{value:e.NFT.toString(),label:"NFT "+e.NFT.toString(),group:"Testnet Miner"}}))},z=function(){var e=Z();return 0==e.length?"-1":e[0].value};return s.loading?(0,c.jsx)(a.Z,{children:(0,c.jsx)(l.a,{})}):(0,c.jsxs)(a.Z,{children:[(0,c.jsxs)("div",{style:{display:"flex"},children:[(0,c.jsx)(k.Ph,{placeholder:s.infoList.length>0?"Choose NFT to ":"No NFTs to assign",data:Z(),defaultValue:z(),style:{marginRight:10},onChange:I},z()),(0,c.jsx)(u.z,{style:{marginBottom:"10px"},onClick:function(){if(!1!==p){var e=A;if(null==e&&"-1"!=z()&&(e=z()),null!=e){var t=function(){i.$().post("".concat(W,"/api/nft_auth/create"),{address:n.currentNetwork.account,nft_id:e}).then((function(t){if("success"==t.data.status){x().fire({title:"Success",html:"<p>Secure Miner Connection Success</p>",icon:"success"}),B();var r="".concat(h.m.DEVICE_URL,"/set_signature"),i=n.currentNetwork.account,o=e,c=t.data.camera.link,a="P"+(t.data.camera.tableid+1)+t.data.camera.id;m().post(r,{signature:t.data.session,nftID:o,wallet:i,link:c,location_id:a},{})}else x().fire({title:"Error",html:"<p>No assignable miners</p>",icon:"error"})})).catch((function(e){x().fire({title:"Error",html:"<p>Errors occured while securing miner connection</p>",icon:"error"})}))};i.check_auth((function(){t()}),(function(){x().fire({title:"Error",html:"<p>You need to login to secure miner connection.</p>",icon:"error",showCancelButton:!0}).then((function(e){e.isConfirmed&&i.login((function(){t()}),(function(){x().fire({title:"Error",html:"<p>Errors Occured while login.</p>",icon:"error"})}))})).catch((function(){x().fire({title:"Info",html:"<p>Securing Miner Connection has been failed.</p>",icon:"info"})}))}))}else x().fire("Info","<p>You need to choose an NFT to secure your Mining Connection.</p>","info")}else x().fire("Error",'<p>You do not have an NFT to secure your Mining Connection.</p>\n                 <p>Please obtain a mining NFT and try again.</p>\n                 <p><a href="/nft/">Buy NFT</a></p>',"warning")},rightIcon:(0,c.jsx)(d.Z,{size:18}),disabled:!1===E,sx:{paddingRight:12},children:"Secure Connection"})]}),(0,c.jsx)(j.Z,{label:"My Miners",children:(0,c.jsxs)("table",{className:e.NFTTable,children:[(0,c.jsx)("thead",{className:e.thead,children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:e.th,children:"Miner Status"},"1"),(0,c.jsx)("th",{className:e.th,children:"NFT Status"},"2"),(0,c.jsx)("th",{className:e.th,children:"NFT ID"},"3"),(0,c.jsx)("th",{className:"".concat(e.th," ").concat(e.btn_th),children:"\xa0\xa0"},"4")]})}),(0,c.jsx)("tbody",{children:0==y.length?(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:4,rowSpan:1,style:{textAlign:"center"},children:"No miners currently assigned."})},0):y.map((function(t,r){return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:e.center,children:1==t.Active?"Active":"Not Active"},"1"),(0,c.jsx)("td",{className:"".concat(e.green," ").concat(e.center),children:t.Connection},"2"),(0,c.jsx)("td",{className:"".concat(e.green," ").concat(e.center),children:(0,c.jsx)("div",{children:t.NFT})},"3"),(0,c.jsx)("td",{children:(0,c.jsx)("div",{children:"Assigned"===t.Connection&&(0,c.jsx)(u.z,{onClick:function(){return function(e){var t=function(){i.$().post("".concat(W,"/api/nft_auth/remove"),{address:n.currentNetwork.account,nft_id:e}).then((function(e){"success"===e.data.status?(x().fire({title:"Success",html:"<p>Connection Removed!</p>",icon:"success"}),B()):x().fire({title:"Error",html:"<p>Errors Occured while removing connection.</p>",icon:"error"})})).catch((function(e){x().fire({title:"Error",html:"<p>Errors Occured while removing connection.</p>",icon:"error"})}))};i.check_auth((function(){t()}),(function(){x().fire({title:"Error",html:"<p>You need to login to secure miner connection.</p>",icon:"error",showCancelButton:!0}).then((function(e){e.isConfirmed&&i.login((function(){t()}),(function(){x().fire({title:"Error",html:"<p>Errors Occured while login.</p>",icon:"error"})}))})).catch((function(){x().fire({title:"Info",html:"<p>Securing Miner Connection has been failed.</p>",icon:"info"})}))}))}(t.NFT)},className:e.button,size:"xs",children:"Remove Miner"})})})]},r)}))})]})}),(0,c.jsx)(_,{}),(0,c.jsx)(P,{})]})}))},44868:function(e,t,n){n.d(t,{Cm:function(){return o},Hk:function(){return l},MZ:function(){return s},SF:function(){return c},WJ:function(){return d},mr:function(){return u},t3:function(){return a}});var r=n(59411),i=n(33331).m.TOKEN_UNIT;function o(e){return e.substring(0,6)+"..."+e.substring(e.length-4)}function c(e){return parseInt((e/(i/BigInt(1e4))).toString())/1e4}function a(e){var t=new Date(3600*e*1e3),n=new Date(3600*(e+1)*1e3);new Date;return t.toLocaleTimeString()+" - "+n.toLocaleTimeString()}function s(){return o(r.Kt)}function l(e){return new Date(1e3*e).toLocaleString()}function u(e){for(var t=[1,60,3600,86400],n=["s","m","h","d"],r=[],i=t.length-1;i>=0;i--)r[i]=Math.floor(e/t[i]),e-=r[i]*t[i];for(var o=0,c="",a=t.length-1;a>=0&&!(r[a]>0&&(c+="".concat(r[a]).concat(n[a]),2==++o));a--);return""==c&&(c="0s"),c}function d(e){return e/1e4+"x"}}}]);