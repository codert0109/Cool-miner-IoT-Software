"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[322],{1686:function(n,e,t){t.d(e,{Z:function(){return i}});var r=t(85893),o=(0,t(58067).k)((function(n){return{root:{display:"flex",flexDirection:"column",height:"100%"},header:{backgroundColor:"dark"==n.colorScheme?"#0887BF":"#26BCFF",border:"0px",borderRadius:"6px",color:"white",alignItems:"center",justifyContent:"center",display:"flex",fontWeight:"bold",zIndex:100,position:"relative",height:"36px"},body:{marginTop:"-8px",backgroundColor:"dark"===n.colorScheme?"black":"#DBDBDB",borderWidth:"0px",color:"black",alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column",padding:"8px",paddingTop:"18px",borderRadius:"6px",flexGrow:1},secondMargin:{marginTop:"5px"}}}));function i(n){var e=n.label,t=n.children,i=n.bodyClass,c=void 0===i?"":i,a=o().classes;return(0,r.jsxs)("div",{className:a.root,children:[(0,r.jsx)("div",{className:a.header,children:(0,r.jsx)("div",{children:e})}),(0,r.jsx)("div",{className:"".concat(a.body," ").concat(c),children:t})]})}},75999:function(n,e,t){t.d(e,{Z:function(){return g}});var r=t(14924),o=t(85893),i=(t(67294),t(58067)),c=t(68940),a=t(76867),s=t(5074),l=t(36861),u=t(71217);function d(n){var e=n.className;return(0,o.jsxs)("div",{className:e,children:["Welcome to the Elumicate Mining Portal!",(0,o.jsx)("br",{}),"Please login and connect to Metamask to access the site."]})}var f="@media (max-width: 755px)",h=(0,i.k)((function(n){return{wrapper:{position:"relative",boxSizing:"border-box",backgroundColor:"dark"===n.colorScheme?n.colors.dark[8]:"#ffffffdb",boxShadow:"dark"===n.colorScheme?"0px 0px 6px 6px #00000030":"0px 0px 6px 6px #ffffffdb"},inner:{position:"relative",paddingLeft:0,paddingRight:0,maxWidth:"none"},title:(0,r.Z)({fontFamily:"Proxima-Nova, ".concat(n.fontFamily),fontSize:62,fontWeight:900,lineHeight:1.1,margin:0,padding:0,color:"dark"===n.colorScheme?n.white:n.black},f,{fontSize:42,lineHeight:1.2}),description:(0,r.Z)({marginTop:n.spacing.xl,fontSize:24},f,{fontSize:18}),controls:(0,r.Z)({marginTop:2*n.spacing.xl},f,{marginTop:n.spacing.xl}),control:(0,r.Z)({height:54,paddingLeft:38,paddingRight:38},f,{height:54,paddingLeft:18,paddingRight:18,flex:1}),githubControl:{borderWidth:2,borderColor:"dark"===n.colorScheme?"transparent":n.colors.dark[9],backgroundColor:"dark"===n.colorScheme?n.colors.dark[5]:"transparent","&:hover":{backgroundColor:"".concat("dark"===n.colorScheme?n.colors.dark[6]:n.colors.gray[0]," !important")}},paddingLeft:{paddingLeft:"36px"},loginMsgDiv:{width:"100%",height:"100%",fontSize:"2em",fontWeight:"bold",textAlign:"center"}}})),p=(c.O,(0,u.Pi)((function(n){var e=n.children,t=h().classes,r=(0,l.o)().god,i=((0,u.fv)((function(){return{showConnecter:function(){r.setShowConnecter(!0)},showWalletInfo:function(){r.currentNetwork.walletInfo.visible=!0},currentAvatar:1}})),(0,o.jsx)(u.Qj,{children:function(){return(0,o.jsx)(s.C,{children:(0,o.jsx)("div",{className:t.wrapper,children:(0,o.jsx)(a.W,{className:t.inner,children:r.currentNetwork.account?e:(0,o.jsx)(d,{className:t.loginMsgDiv})})})})}}));return(0,o.jsx)(o.Fragment,{children:i})})));p.displayName="HeroTitle";var g=p},35322:function(n,e,t){t.r(e);var r=t(47568),o=t(34051),i=t.n(o),c=t(85893),a=t(75999),s=t(58067),l=t(88852),u=t(55910),d=t(33331),f=t(36861),h=t(9669),p=t.n(h),g=t(86455),m=t.n(g),x=t(31037),b=t(59411),v=t(67294),N=t(1686),k=t(44868),C=t(71217),w=t(55649),j=(t(18699).getWindow().ethereum,d.m.BACKEND_URL),S=(0,s.k)((function(n){return{progressBar:{"&:not(:first-of-type)":{borderLeft:"3px solid ".concat("dark"===n.colorScheme?n.colors.dark[7]:n.white)}},NFTTable:{background:"white",color:"black",width:"100%"},green:{color:"green"},center:{textAlign:"center"},button:{marginLeft:10,marginRight:10},thead:{borderBottom:"1px solid black"},th:{borderBottom:"1px solid black"},btn_th:{width:110}}}));e.default=(0,C.Pi)((function(){var n=S().classes,e=(0,f.o)(),t=e.god,o=e.auth,s=e.nft,h=(0,v.useState)(!1),g=h[0],C=h[1],E=(0,v.useState)([]),y=(E[0],E[1]),T=(0,v.useState)([]),F=T[0],M=T[1],_=(0,v.useState)(""),L=_[0],I=_[1],B=(0,v.useState)(""),D=(B[0],B[1]),R=(0,v.useState)(null),Z=R[0],z=R[1];(0,v.useEffect)((function(){s.refresh()}),[t.currentNetwork.account]);var W=function(){var n="".concat(d.m.DEVICE_URL,"/get_status");p().get(n).then((function(n){var e=n.data;"an error has occured"==e.message?(I(""),D("")):o.$().post("".concat(j,"/api/nft_auth/verifySignature"),{signature:e.signature}).then((function(n){"OK"===n.data.status?(I(""),D("")):(I(e.miner),D(e.signature))})).catch((function(n){I(e.miner),D(e.signature)}))})).catch((function(n){I(""),D("")}))},A=function(){s.getNFTLists().then((function(n){var e=n;y(e);var t=[];e.forEach((function(n){t.push({NFT:parseInt(n.toString()),Miner:"Loading",Connection:"Loading"})})),M((function(n){return t})),e.forEach((function(n){o.$().post("".concat(j,"/api/nft_auth/status"),{nft_id:n.toString()}).then((function(n){var e=n.data.data;e.session?M([{NFT:e.nft_id,Miner:e.miner?e.miner:"Not set",Connection:e.session?"Assigned":"Not assigned"}]):M([])})).catch((function(n){console.log(n)}))}))})).catch((function(n){y([])}))},O=function(){A(),W()};(0,v.useEffect)((function(){W()}),[t.currentNetwork.account]),(0,v.useEffect)((function(){var n=setInterval((function(){W()}),2e3);return function(){clearInterval(n)}}),[]),(0,v.useEffect)((function(){A()}),[t.currentNetwork.account]);var P=function(){var n=(0,r.Z)(i().mark((function n(){var e;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=b.Kt,n.prev=1,n.next=4,t.currentNetwork.execContract({address:e,abi:x.Mt,method:"balanceOf",params:[t.currentNetwork.account]});case 4:if(!(n.sent[0]>0)){n.next=7;break}return n.abrupt("return",!0);case 7:return n.abrupt("return",!1);case 10:return n.prev=10,n.t0=n.catch(1),n.abrupt("return",!1);case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(){return n.apply(this,arguments)}}();(0,v.useEffect)((function(){P().then((function(n){C(!0)})).catch((function(n){C(!1)}))}),[t.currentNetwork.account]);if(s.loading)return(0,c.jsx)(a.Z,{});return(0,c.jsxs)(a.Z,{children:[(0,c.jsxs)("div",{style:{display:"flex"},children:[(0,c.jsx)(w.Ph,{placeholder:s.infoList.length>0?"Choose NFT to Mine":"No NFTs to assign",data:s.infoList.map((function(n,e){return{value:s.idList[e].toString(),label:"NFT "+s.idList[e].toString(),group:"Testnet Miner"}})),style:{marginRight:10},onChange:z}),(0,c.jsx)(l.z,{style:{marginBottom:"10px"},onClick:function(){if(!1!==g)if(null!=Z){var n=function(){o.$().post("".concat(j,"/api/nft_auth/create"),{address:t.currentNetwork.account,nft_id:Z,miner:L}).then((function(n){m().fire({title:"Success",html:"<p>Secure Miner Connection Success</p>",icon:"success"}),O();var e="".concat(d.m.DEVICE_URL,"/set_signature"),r=t.currentNetwork.account,o=(0,k.G7)(r);p().post(e,{signature:n.data.session,nftID:o,wallet:r},{})})).catch((function(n){m().fire({title:"Error",html:"<p>Errors occured while securing miner connection</p>",icon:"error"})}))};o.check_auth((function(){n()}),(function(){m().fire({title:"Error",html:"<p>You need to login to secure miner connection.</p>",icon:"error",showCancelButton:!0}).then((function(e){e.isConfirmed&&o.login((function(){n()}),(function(){m().fire({title:"Error",html:"<p>Errors Occured while login.</p>",icon:"error"})}))})).catch((function(){m().fire({title:"Info",html:"<p>Securing Miner Connection has been failed.</p>",icon:"info"})}))}))}else m().fire("Info","<p>You need to choose an NFT to secure your Mining Connection.</p>","info");else m().fire("Error",'<p>You do not have an NFT to secure your Mining Connection.</p>\n                 <p>Please obtain a mining NFT and try again.</p>\n                 <p><a href="/nft/">Buy NFT</a></p>',"warning")},rightIcon:(0,c.jsx)(u.Z,{size:18}),disabled:""===L,sx:{paddingRight:12},children:""!==L?"Secure ".concat(L," Connection"):"Secure Connection"})]}),(0,c.jsx)(N.Z,{label:"My Miners",children:(0,c.jsxs)("table",{className:n.NFTTable,children:[(0,c.jsx)("thead",{className:n.thead,children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:n.th,children:"Miner Name"},"1"),(0,c.jsx)("th",{className:n.th,children:"NFT Status"},"2"),(0,c.jsx)("th",{className:n.th,children:"NFT ID"},"3"),(0,c.jsx)("th",{className:"".concat(n.th," ").concat(n.btn_th),children:"\xa0\xa0"},"4")]})}),(0,c.jsx)("tbody",{children:0==F.length?(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:4,rowSpan:1,style:{textAlign:"center"},children:"No miners currently assigned."})},0):F.map((function(e,r){return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:n.center,children:e.Miner},"1"),(0,c.jsx)("td",{className:"".concat(n.green," ").concat(n.center),children:e.Connection},"2"),(0,c.jsx)("td",{className:"".concat(n.green," ").concat(n.center),children:(0,c.jsx)("div",{children:e.NFT})},"3"),(0,c.jsx)("td",{children:(0,c.jsx)("div",{children:"Assigned"===e.Connection&&(0,c.jsx)(l.z,{onClick:function(){return function(n){var e=function(){o.$().post("".concat(j,"/api/nft_auth/remove"),{address:t.currentNetwork.account,nft_id:n}).then((function(n){"success"===n.data.status?(m().fire({title:"Success",html:"<p>Connection Removed!</p>",icon:"success"}),O()):m().fire({title:"Error",html:"<p>Errors Occured while removing connection.</p>",icon:"error"})})).catch((function(n){m().fire({title:"Error",html:"<p>Errors Occured while removing connection.</p>",icon:"error"})}))};o.check_auth((function(){e()}),(function(){m().fire({title:"Error",html:"<p>You need to login to secure miner connection.</p>",icon:"error",showCancelButton:!0}).then((function(n){n.isConfirmed&&o.login((function(){e()}),(function(){m().fire({title:"Error",html:"<p>Errors Occured while login.</p>",icon:"error"})}))})).catch((function(){m().fire({title:"Info",html:"<p>Securing Miner Connection has been failed.</p>",icon:"info"})}))}))}(e.NFT)},className:n.button,size:"xs",children:"Remove Miner"})})})]},r)}))})]})})]})}))},44868:function(n,e,t){t.d(e,{Cm:function(){return o},G7:function(){return c},MZ:function(){return i}});var r=t(59411);function o(n){return n.substring(0,6)+"..."+n.substring(n.length-4)}function i(){return o(r.Kt)}function c(n){var e=n.substring(2,6);e=e.toUpperCase();for(var t=0,r=0;r<e.length;r++){t=16*t+"0123456789ABCDEF".indexOf(e[r])}return t%1e3+1}}}]);