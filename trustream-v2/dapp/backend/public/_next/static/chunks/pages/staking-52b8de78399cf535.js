(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{25062:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/staking",function(){return n(68416)}])},68416:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(85893),i=n(75999),s=n(58067),o=n(67294),a=n(71217),l=n(98547),c=n(24242),d=n(1686),u=n(92386),h=n(91142),p=n(44868),f=(0,s.k)((function(e){return{textAlign:{paddingLeft:0,paddingRight:0,textAlign:"center"},center_container:{height:24,display:"flex",alignItems:"center",paddingLeft:15}}})),x=(0,a.Pi)((function(e){var t,n=f().classes,i=(0,c.o)(),s=(i.god,i.token);return(0,r.jsx)(d.Z,{label:"ELUM Available to Stake",children:(0,r.jsx)(u.Z,{label:(t=(0,r.jsx)(r.Fragment,{children:(0,p.SF)(BigInt(s.balance))}),s.loading?(0,r.jsx)("div",{className:n.center_container,children:(0,r.jsx)(h.a,{size:18})}):t),className:n.textAlign})})})),m=(0,s.k)((function(e){return{textAlign:{paddingLeft:0,paddingRight:0,textAlign:"center"},center_container:{height:24,display:"flex",alignItems:"center",paddingLeft:15}}})),g=(0,a.Pi)((function(e){var t,n=m().classes,i=(0,c.o)(),s=(i.god,i.stake);return(0,r.jsx)(d.Z,{label:"ELUM Staked",children:(0,r.jsx)(u.Z,{label:(t=(0,r.jsx)(r.Fragment,{children:(0,p.SF)(s.stakedInfo.amount)}),s.loading?(0,r.jsx)("div",{className:n.center_container,children:(0,r.jsx)(h.a,{size:18})}):t),className:n.textAlign})})})),k=n(49497),j=n(68129),b=n(47568),v=n(34051),C=n.n(v),y=n(88852),w=n(13131),S=n(50112),T=n(53365),I=n(11996),E=n(94184),N=n.n(E),A=n(86455),_=n.n(A),z=n(59411),L=n(33331),Z=L.m.TOKEN_UNIT,B=(0,s.k)((function(e){return{button:{position:"relative",transition:"background-color 150ms ease",minWidth:"100%",maxWidth:"100%",width:"100%",height:"100%",fontSize:"1.5rem"},progress:{position:"absolute",bottom:-1,right:-1,left:-1,top:-1,height:"auto",backgroundColor:"transparent",zIndex:0},label:{position:"relative",zIndex:1},text:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},refresh:{position:"absolute",top:6,right:6,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},textCenter:{textAlign:"center",paddingLeft:0,paddingRight:0,cursor:"pointer",userSelect:"none"},gridPadding:{paddingLeft:"0px !important",paddingRight:"0px !important"},active:{backgroundColor:"#2f9e44",color:"white"},disable:{backgroundColor:"rgb(93, 109, 255)",color:"white",cursor:"not-allowed",pointerEvents:"none"},inputtext:{backgroundColor:"white",border:"none",outline:"none",width:"100%",height:"100%",fontFamily:"Proxima-Nova-Bold!important"},nowrap:{whiteSpace:"nowrap"},centerAlign:{display:"flex",alignItems:"center",justifyContent:"center",padding:0,paddingTop:3}}})),P=(0,a.Pi)((function(e){var t=B().classes,n=(0,o.useState)(0),i=n[0],s=n[1],a=(0,o.useState)(BigInt(0)),f=a[0],x=a[1],m=(0,c.o)(),g=(m.god,m.stake),k=m.token,j=(0,o.useState)(-1),v=j[0],w=j[1];(0,o.useEffect)((function(){void 0!=e.amount&&x(e.amount),void 0!=e.period&&w(e.period)}),[e.amount,e.period]);var S="edit"==e.type?3:4;return(0,r.jsx)(d.Z,{label:(0,r.jsxs)(r.Fragment,{children:["edit"==e.type?"Edit Staking Contract":"Stake ELUM","edit"==e.type&&(0,r.jsx)("div",{className:t.refresh,onClick:function(){void 0!=e.onClose&&e.onClose()},children:(0,r.jsx)("span",{children:"X"})})]}),bodyClass:t.gridPadding,children:(0,r.jsxs)(l.r,{style:{width:"100%"},children:["edit"==e.type&&(0,r.jsx)(l.r.Col,{md:S,sm:12,children:(0,r.jsxs)(l.r,{children:[(0,r.jsx)(l.r.Col,{md:12,sm:12,children:(0,r.jsx)(u.Z,{className:t.nowrap,label:"Re-Staking Amount"})}),(0,r.jsx)(l.r.Col,{md:12,sm:12,children:(0,r.jsx)(u.Z,{className:"",label:(0,p.SF)(f)})})]})}),(0,r.jsx)(l.r.Col,{md:S,sm:12,children:(0,r.jsxs)(l.r,{children:[(0,r.jsx)(l.r.Col,{md:12,sm:12,children:(0,r.jsx)(u.Z,{className:t.nowrap,label:"Quantity to add to contract"})}),(0,r.jsx)(l.r.Col,{md:12,sm:12,children:(0,r.jsx)(u.Z,{className:"",label:(0,r.jsx)("input",{type:"text",placeholder:"Input an Number",value:i,className:t.inputtext,onChange:function(e){""==e.target.value?s(0):s(parseInt(e.target.value))}})})})]})}),(0,r.jsx)(l.r.Col,{md:S,sm:12,children:(0,r.jsxs)(l.r,{children:[(0,r.jsx)(l.r.Col,{md:12,sm:12,children:(0,r.jsx)(u.Z,{className:"",label:"Stake Duration"})}),function(){if(0==g.stakeTypeList.length)return(0,r.jsx)(l.r.Col,{md:12,sm:12,children:(0,r.jsx)(u.Z,{className:N()(t.centerAlign),label:(0,r.jsx)("div",{children:(0,r.jsx)(h.a,{size:"xs"})})})});var n=function(n){return v==n.period?N()(t.textCenter,t.active):"edit"==e.type?e.period<=n.period?N()(t.textCenter):N()(t.textCenter,t.disable):N()(t.textCenter)};return g.stakeTypeList.map((function(e){return(0,r.jsx)(l.r.Col,{md:3,sm:3,children:(0,r.jsx)(u.Z,{className:n(e),onClick:function(){return function(e){w(e)}(e.period)},label:e.label})})}))}()]})}),(0,r.jsx)(l.r.Col,{md:S,sm:12,children:(0,r.jsx)(y.z,{className:t.button,onClick:function(){return function(){if(-1!=v){var t=-1;g.stakeTypeList.forEach((function(e,n){e.period==v&&(t=n)})),-1!=t?"edit"==e.type||0!=i?_().fire({title:"Info",html:"edit"==e.type?0==i?"<p>You are restaking ".concat((0,p.SF)(f)," tokens for a period of ").concat(g.stakingTable.period_label[t],"</p>"):"<p>You are restaking ".concat((0,p.SF)(f)," tokens and adding ").concat(i," tokens for a period of ").concat(g.stakingTable.period_label[t],"</p>"):"<p>You are staking ".concat(i," tokens for a period of ").concat(g.stakingTable.period_label[t],"</p>"),icon:"info",showCancelButton:!0}).then((function(n){if(n.isConfirmed){void 0!=e.onConfirmStart&&e.onConfirmStart();var r=function(){g.stake(t,BigInt(i)*Z).then(function(){var e=(0,b.Z)(C().mark((function e(t){var n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,e.next=5,n.wait();case 5:_().fire("Success","<p>You staked ".concat(parseInt((f/Z).toString())+i," tokens successfully!</p>"),"success"),k.refresh(),g.refresh();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){_().fire("Error","<p>Errors occured while staking</p>","error")}))};i>0?_().fire({title:"Info",html:'<p>You will need to confirm 2 wallet transactions (depending on blockchain congestion, this could take 5 to 10 seconds per transaction).</p>\n                  <ul style="text-align:left;">\n                    <li>The first transaction is to allow the staking contract to gain access to the tokens you are staking.</li>\n                    <li>The second transaction is be to finalize the token staking transaction and lock up your tokens for the contract period.</li>\n                  </ul>',icon:"info",showCancelButton:!0}).then((function(e){e.isConfirmed&&k.allowToken(z.rA,BigInt(i)*Z).then(function(){var e=(0,b.Z)(C().mark((function e(t){var n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,e.next=5,n.wait();case 5:r();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){_().fire("Error","<p>Errors occured while approving ".concat(i," tokens to Staking Contract.</p>\n              <p>Please check your token balance.</p>"),"error")}))})).catch((function(e){_().fire("Error","<p>Errors occured while staking</p>","error")})):r()}})).catch((function(e){console.error("staketokens",e),_().fire("Error","<p>Errors occured while staking</p>","error")})):_().fire("Info","<p>You need to stake positive number of tokens.</p>","info"):_().fire("Info","<p>There is no suitable staking type to satisfy your requirement.</p>","info")}else _().fire("Info","<p>You need to choose period to stake.</p>","info")}()},color:"yellow",disabled:void 0!=e.period&&v<e.period,children:"edit"==e.type?"Restake":"Stake"})})]})})})),F=L.m.TOKEN_UNIT,M=(0,s.k)((function(e){return{progressBar:{"&:not(:first-of-type)":{borderLeft:"3px solid ".concat("dark"===e.colorScheme?e.colors.dark[7]:e.white)}},expired:{color:"red"}}})),R=(0,a.Pi)((function(e){var t=M(),n=t.classes,i=t.theme,s=(0,c.o)(),a=s.stake,l=s.token,d=(0,o.useState)(!1),u=d[0],f=d[1],x=(0,o.useState)(0),m=x[0],g=x[1],k=(0,o.useState)(0),j=k[0],v=k[1],E=(0,o.useState)(0),N=E[0],A=E[1],z=(0,o.useState)(0),L=z[0],Z=z[1];(0,o.useEffect)((function(){var e=setInterval((function(){if(!a.loading){var e=a.stakedInfo.expireTime-a.stakedInfo.startTime,t=a.timestamp()-a.stakedInfo.startTime;t<0?t=0:t>e&&(t=e);var n=e-t,r=100*t/Math.max(1,e),i=100-r;g(t),v(n),A(r),Z(i)}}),1e3);return function(){clearInterval(e)}}),[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.u,{centered:!0,size:"calc(100vw - 87px)",padding:0,withCloseButton:!1,overlayColor:"dark"===i.colorScheme?i.colors.dark[9]:i.colors.gray[2],overlayOpacity:0,overlayBlur:3,opened:u,onClose:function(){f(!1)},style:{zIndex:3e3},children:(0,r.jsx)(P,{type:"edit",onClose:function(){f(!1)},onConfirmStart:function(){f(!1)},period:a.stakedInfo.expireTime-a.stakedInfo.startTime,amount:a.stakedInfo.amount})}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:a.loading?(0,r.jsx)(h.a,{size:"sm"}):a.stakingStatus()==a.STAKING_STATUS.EXPIRED?(0,r.jsx)("span",{className:n.expired,children:"Expired"}):(0,p.Hk)(a.stakedInfo.startTime)}),(0,r.jsx)("td",{style:{textAlign:"center"},children:a.loading?(0,r.jsx)(h.a,{size:"sm"}):(0,p.SF)(a.stakedInfo.amount)}),(0,r.jsx)("td",{children:a.loading?(0,r.jsx)(h.a,{size:"sm"}):a.stakingStatus()==a.STAKING_STATUS.EXPIRED?(0,r.jsx)(y.z,{onClick:function(){a.withdrawStaker().then(function(){var e=(0,b.Z)(C().mark((function e(t){var n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,e.next=5,n.wait();case 5:_().fire("Success","<p>Your ELUM tokens have been transferred to your wallet successfully!</p>","success"),a.refresh(),l.refresh();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){_().fire("Error","<p>Errors occured while withDraw tokens</p>","error")}))},color:"orange",size:"xs",children:"Withdraw your ELUM"}):(0,r.jsxs)("div",{style:{overflow:"hidden"},children:[(0,r.jsxs)(w.Z,{position:"apart",children:[(0,r.jsxs)(S.x,{size:"xs",color:"rgb(0, 141, 19)",weight:800,children:[(0,p.mr)(m)," passed"]}),(0,r.jsxs)(S.x,{size:"xs",color:"rgb(255, 1, 1)",weight:800,children:[(0,p.mr)(j)," left"]})]}),(0,r.jsx)(T.E,{classNames:{bar:n.progressBar},sections:[{value:N,color:"rgb(0, 141, 19)"},{value:L,color:"rgb(255, 1, 1)"}]})]})}),function(){if(a.loading)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{children:(0,r.jsx)(h.a,{size:"sm"})}),(0,r.jsx)("td",{children:(0,r.jsx)(h.a,{size:"sm"})}),(0,r.jsx)("td",{children:(0,r.jsx)(h.a,{size:"sm"})})]});if(a.stakingStatus()==a.STAKING_STATUS.EXPIRED)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{children:a.activeMinerCnt}),(0,r.jsx)("td",{children:"\xa0"}),(0,r.jsx)("td",{children:"\xa0"})]});for(var e=Math.max(1,a.activeMinerCnt),t=parseInt((BigInt(a.stakedInfo.amount)/F/BigInt(e)).toString()),n=-1,i="",s=0;s<a.stakingTable.level.length;s++)for(var o=0;o<a.stakingTable.period.length;o++)a.stakingTable.amount[s]>t||a.stakingTable.period[o]>a.stakedInfo.expireTime-a.stakedInfo.startTime||(-1==n||n<a.stakingTable.multiplier[s][o])&&(n=a.stakingTable.multiplier[s][o],i=a.stakingTable.level[s]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{children:a.activeMinerCnt}),(0,r.jsx)("td",{children:-1==n?"X 1.0":"X ".concat(n/1e4)}),(0,r.jsx)("td",{children:""==i?"No level":i})]})}(),(0,r.jsx)("td",{children:a.loading?(0,r.jsx)(h.a,{size:"sm"}):a.stakingStatus()==a.STAKING_STATUS.STAKING?(0,r.jsx)(y.z,{onClick:function(){f(!0)},color:"teal",size:"xs",children:"Edit | Extend"}):(0,r.jsx)(y.z,{onClick:function(){return function(){a.stakeTypeList;var e=a.stakedInfo.expireTime-a.stakedInfo.startTime,t=-1;a.stakeTypeList.forEach((function(n,r){n.period<=e&&(-1==t||a.stakeTypeList[t].period<n.period)&&(t=r)})),-1!=t?_().fire({title:"Info",html:"<p>You are restaking ".concat(a.stakedInfo.amount," tokens for a period of ").concat(a.getStakingLabel(),"</p>"),icon:"info",showCancelButton:!0}).then((function(e){e.isConfirmed&&a.stake(t,0).then(function(){var e=(0,b.Z)(C().mark((function e(t){var n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,e.next=5,n.wait();case 5:_().fire("Success","<p>You restaked tokens successfully!</p>","success"),l.refresh(),a.refresh();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){_().fire("Error","<p>Errors occured while staking</p>","error")}))})).catch((function(e){console.error("staketokens",e),_().fire("Error","<p>Errors occured while staking</p>","error")})):_().fire("Info","<p>There is no available staking type for you.</p>","info")}()},color:"green",size:"xs",children:"Restake"})})]},0)]})})),U=((0,s.k)((function(e){return{progressBar:{"&:not(:first-of-type)":{borderLeft:"3px solid ".concat("dark"===e.colorScheme?e.colors.dark[7]:e.white)}}}})),(0,a.Pi)((function(e){var t=(0,c.o)().stake;return(0,r.jsx)(u.Z,{label:(0,r.jsx)(k.x,{style:{width:"100%"},children:(0,r.jsxs)(j.i,{sx:{minWidth:600,maxWidth:"100%",color:"black"},verticalSpacing:"xs",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{color:"black"},children:"Date"}),(0,r.jsx)("th",{style:{color:"black",textAlign:"center"},children:"Staked Amount"}),(0,r.jsx)("th",{style:{color:"black"},children:"Staking Period"}),(0,r.jsx)("th",{style:{color:"black"},children:"Active Miner(s)"}),(0,r.jsx)("th",{style:{color:"black"},children:"Current Multiplier"}),(0,r.jsx)("th",{style:{color:"black"},children:"Level"}),(0,r.jsx)("th",{style:{color:"black"},children:"Edit"})]})}),(0,r.jsx)("tbody",{children:t.stakedInfo.amount==BigInt(0)?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,children:(0,r.jsx)("div",{style:{textAlign:"center"},children:"There is no staking"})})}):(0,r.jsx)(R,{})})]})}),className:""})})));function W(){return(0,r.jsx)(d.Z,{label:"Staking Status",children:(0,r.jsx)(U,{})})}var Y=n(48544),X=(0,s.k)((function(e){return{textAlign:{paddingLeft:0,paddingRight:0,textAlign:"center",marginTop:1,marginBottom:1},center_container:{height:24,display:"flex",alignItems:"center",paddingLeft:15},p:{marginTop:1,marginBottom:1}}})),K=(0,a.Pi)((function(e){var t=X().classes,n=(0,c.o)(),i=(n.god,n.stake),s=(0,o.useState)(!1),a=(s[0],s[1]),f=function(e){return i.loading?(0,r.jsx)("div",{className:t.center_container,children:(0,r.jsx)(h.a,{size:18})}):e};return(0,r.jsxs)(l.r,{children:[(0,r.jsx)(l.r.Col,{sm:12,md:12,children:(0,r.jsx)(d.Z,{label:"Staked Token Multipliers",children:(0,r.jsx)(k.x,{sx:{width:"100%"},onScrollPositionChange:function(e){var t=e.y;return a(0!==t)},children:(0,r.jsxs)("div",{style:{minWidth:600,marginBottom:10},children:[(0,r.jsx)(u.Z,{label:f((0,r.jsxs)(l.r,{columns:70,children:[(0,r.jsx)(l.r.Col,{span:13,children:"Level"}),(0,r.jsx)(l.r.Col,{span:17,children:"Tokens Required"}),(0,r.jsx)(l.r.Col,{span:10,children:i.stakingTable.period_label[0]}),(0,r.jsx)(l.r.Col,{span:10,children:i.stakingTable.period_label[1]}),(0,r.jsx)(l.r.Col,{span:10,children:i.stakingTable.period_label[2]}),(0,r.jsx)(l.r.Col,{span:10,children:i.stakingTable.period_label[3]})]})),className:t.textAlign}),i.stakingTable.level.map((function(e,n){return(0,r.jsx)(u.Z,{label:f((0,r.jsxs)(l.r,{grow:!1,columns:70,children:[(0,r.jsx)(l.r.Col,{span:13,children:e}),(0,r.jsx)(l.r.Col,{span:17,children:i.stakingTable.amount[n]}),(0,r.jsx)(l.r.Col,{span:10,children:(0,p.WJ)(i.stakingTable.multiplier[n][0])}),(0,r.jsx)(l.r.Col,{span:10,children:(0,p.WJ)(i.stakingTable.multiplier[n][1])}),(0,r.jsx)(l.r.Col,{span:10,children:(0,p.WJ)(i.stakingTable.multiplier[n][2])}),(0,r.jsx)(l.r.Col,{span:10,children:(0,p.WJ)(i.stakingTable.multiplier[n][3])})]})),className:t.textAlign})}))]})})})}),(0,r.jsx)(l.r.Col,{sm:12,md:12,children:(0,r.jsx)(u.Z,{label:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:t.p,children:"Staked tokens are divided by the number of active miners to calculate multipliers"}),(0,r.jsx)("p",{className:t.p,children:"2000 tokens staked for 360 with 1 miner = 1.85x multiplier,"}),(0,r.jsx)("p",{className:t.p,children:"if there are 2 miners, 1.55x multiplier."}),(0,r.jsx)("p",{className:t.p,children:"A Miner is considered active if it has uploaded data within the current 60 minute epoch."})]}),className:t.textAlign})})]})})),D=((0,s.k)((function(e){return{progressBar:{"&:not(:first-of-type)":{borderLeft:"3px solid ".concat("dark"===e.colorScheme?e.colors.dark[7]:e.white)}}}})),(0,a.Pi)((function(e){var t=(0,c.o)(),n=t.god,s=t.stake,a=t.token;return(0,o.useEffect)((function(){void 0!=n.currentNetwork.account&&(s.refresh(),a.refresh())}),[n.currentNetwork.account]),(0,r.jsx)(i.Z,{children:(0,r.jsxs)(l.r,{children:[(0,r.jsx)(l.r.Col,{sm:6,md:4,children:(0,r.jsx)(x,{})}),(0,r.jsx)(l.r.Col,{sm:6,md:4,children:(0,r.jsx)(g,{})}),(0,r.jsx)(l.r.Col,{sm:12,md:12,children:(0,r.jsx)(Y.Z,{})}),(0,r.jsx)(l.r.Col,{sm:12,md:12,children:s.stakedInfo.amount>0&&(0,r.jsx)(W,{})}),(0,r.jsx)(l.r.Col,{sm:12,md:12,children:s.stakedInfo.amount==BigInt(0)&&(0,r.jsx)(P,{type:"normal"})}),(0,r.jsx)(l.r.Col,{sm:12,md:12,children:(0,r.jsx)(K,{})})]})})})))}},function(e){e.O(0,[201,965,278,182,774,888,179],(function(){return t=25062,e(e.s=t);var t}));var t=e.O();_N_E=t}]);