(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[447],{78364:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/nft",function(){return n(44447)}])},75066:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(14924),a=n(85893),i=(n(67294),n(58067)),o=n(68940),s=n(3857),l=n(76867),u=n(5074),c=n(31567),p=n(93725),d="@media (max-width: 755px)",m=(0,i.k)((function(e){return{wrapper:{position:"relative",boxSizing:"border-box",backgroundColor:"dark"===e.colorScheme?e.colors.dark[8]:e.white},inner:{position:"relative"},title:(0,r.Z)({fontFamily:"Greycliff CF, ".concat(e.fontFamily),fontSize:62,fontWeight:900,lineHeight:1.1,margin:0,padding:0,color:"dark"===e.colorScheme?e.white:e.black},d,{fontSize:42,lineHeight:1.2}),description:(0,r.Z)({marginTop:e.spacing.xl,fontSize:24},d,{fontSize:18}),controls:(0,r.Z)({marginTop:2*e.spacing.xl},d,{marginTop:e.spacing.xl}),control:(0,r.Z)({height:54,paddingLeft:38,paddingRight:38},d,{height:54,paddingLeft:18,paddingRight:18,flex:1}),githubControl:{borderWidth:2,borderColor:"dark"===e.colorScheme?"transparent":e.colors.dark[9],backgroundColor:"dark"===e.colorScheme?e.colors.dark[5]:"transparent","&:hover":{backgroundColor:"".concat("dark"===e.colorScheme?e.colors.dark[6]:e.colors.gray[0]," !important")}},paddingLeft:{paddingLeft:"36px"}}}));o.O;function f(e){var t=e.children,n=((0,p.o)().lang,m()),r=n.classes;n.cx,(0,s.rZ)(),(0,c.$)().t;return(0,a.jsx)(u.C,{children:(0,a.jsx)("div",{className:r.wrapper,children:(0,a.jsx)(l.W,{className:r.inner,children:t})})})}},18699:function(e){"use strict";e.exports={getWindow:function(){return window}}},44447:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(47568),a=n(34051),i=n.n(a),o=n(85893),s=n(67294),l=n(75066),u=n(58067),c=n(13131),p=n(50112),d=n(53365),m=n(49497),f=n(68129),y=n(51223),x=n(88852),h=n(10253),g=n(55798),b=n(64146),S=JSON.parse('{"Mt":[{"inputs":[{"internalType":"address","name":"_token_address","type":"address"},{"internalType":"uint256","name":"_maxNormalSupply","type":"uint256"},{"internalType":"uint256","name":"_priceNormalNFT","type":"uint256"},{"internalType":"uint256","name":"_maxSpecialSupply","type":"uint256"},{"internalType":"uint256","name":"_priceSpecialNFT","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"normalNFT","type":"uint256"},{"internalType":"uint256","name":"specialNFT","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxNormalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSpecialSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceNormalNFT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceSpecialNFT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxNormalSupply","type":"uint256"}],"name":"setMaxNormalSupply","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxSpecialSupply","type":"uint256"}],"name":"setMaxSpecialSupply","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_priceNormalNFT","type":"uint256"}],"name":"setNormalPrice","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_priceSpecialNFT","type":"uint256"}],"name":"setSpecialPrice","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_token_address","type":"address"}],"name":"setTokenAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"totalNormalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSpecialSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_normalNFTCnt","type":"uint256"},{"internalType":"uint256","name":"_specialNFTCnt","type":"uint256"},{"internalType":"address","name":"to","type":"address"}],"name":"transferNFT","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_normalNFTCnt","type":"uint256"},{"internalType":"uint256","name":"_specialNFTCnt","type":"uint256"}],"name":"verifyNFT","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"payable","type":"function"}]}'),T=JSON.parse('{"Sm":"0x2F9408A3848b15B87a2fbe88a131701C10148466"}'),v=n(93725),N=n(18699).getWindow().ethereum,w=n(18699);function k(e){var t=e.onStatus,a=(0,v.o)().god,l=null,u=null,c=function(){var e=(0,r.Z)(i().mark((function e(){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.currentNetwork.account,l==n){e.next=8;break}if(k(),void 0!==n){e.next=5;break}return e.abrupt("return",y());case 5:d(n),e.next=36;break;case 8:if(null==l){e.next=36;break}return e.next=11,w._NFT.balanceOf(l);case 11:return r=e.sent,e.next=14,w._NFT.priceNormalNFT();case 14:return e.t0=e.sent.toString(),e.next=17,w._NFT.totalNormalSupply();case 17:return e.t1=e.sent.toString(),e.next=20,w._NFT.maxNormalSupply();case 20:return e.t2=e.sent.toString(),e.t3=r[0].toString(),e.t4={type:"NormalNFT",price:e.t0,totalSupply:e.t1,maxSupply:e.t2,balance:e.t3},e.next=25,w._NFT.priceSpecialNFT();case 25:return e.t5=e.sent.toString(),e.next=28,w._NFT.totalSpecialSupply();case 28:return e.t6=e.sent.toString(),e.next=31,w._NFT.maxSpecialSupply();case 31:e.t7=e.sent.toString(),e.t8=r[1].toString(),e.t9={type:"SpecialNFT",price:e.t5,totalSupply:e.t6,maxSupply:e.t7,balance:e.t8},o=[e.t4,e.t9],t({account:l,Info:o});case 36:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("4690"!==N.networkVersion){e.next=2;break}return e.abrupt("return",!0);case 2:return"Please connect Metamask to IoTex Network",e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("_initialize called",t),l=t,m(),x();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=new g.Web3Provider(N),console.log("getsigner",u.getSigner()),w._NFT=new b.Contract(T.Sm,S.Mt,u.getSigner(0));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.currentNetwork.account,console.log("selectedAddress",t),p()){e.next=4;break}return e.abrupt("return");case 4:d(t),console.log("init working"),N.on("accountsChanged",(function(e){var t=(0,h.Z)(e,1)[0];if(console.log("version",N.networkVersion),k(),void 0===t)return y();d(t)})),N.on("chainChanged",(function(e){(0,h.Z)(e,1)[0];k(),y()}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){l=null,""},x=function(){k(),n(18699)._pollDataInterval=setInterval((function(){return c()}),1e3),c()},k=function(){void 0!=n(18699)._pollDataInterval&&clearInterval(n(18699)._pollDataInterval),n(18699)._pollDataInterval=void 0};return(0,s.useEffect)((function(){console.log("connect wallet called"),f()}),[]),(0,o.jsx)(o.Fragment,{})}var F=n(55550),_=(0,u.k)((function(e,t){var n=t.floating;return{root:{position:"relative"},label:{position:"absolute",zIndex:2,top:7,left:e.spacing.sm,pointerEvents:"none",color:n?"dark"===e.colorScheme?e.white:e.black:"dark"===e.colorScheme?e.colors.dark[3]:e.colors.gray[5],transition:"transform 150ms ease, color 150ms ease, font-size 150ms ease",transform:n?"translate(-".concat(e.spacing.sm,"px, -28px)"):"none",fontSize:n?e.fontSizes.xs:e.fontSizes.sm,fontWeight:n?500:400},required:{transition:"opacity 150ms ease",opacity:n?1:0},input:{"&::placeholder":{transition:"color 150ms ease",color:n?void 0:"transparent"}}}}));function j(e){var t=e.label,n=e.placeholder,r=e.onChange,a=(0,s.useState)(!1),i=a[0],l=a[1],u=(0,s.useState)(""),c=u[0],p=u[1],d=_({floating:0!==c.trim().length||i}).classes;return(0,o.jsx)(F.o,{label:t,placeholder:n,required:!0,classNames:d,value:c,onChange:function(e){p(e.currentTarget.value),r(e.currentTarget.value)},onFocus:function(){return l(!0)},onBlur:function(){return l(!1)},mt:"md",autoComplete:"nope"})}var C=n(86455),M=n.n(C),I=n(44431),z=n(18699),E=(0,u.k)((function(e){return{progressBar:{"&:not(:first-of-type)":{borderLeft:"3px solid ".concat("dark"===e.colorScheme?e.colors.dark[7]:e.white)}},root:{position:"relative"},input:{height:"auto",paddingTop:18},label:{position:"absolute",pointerEvents:"none",fontSize:e.fontSizes.xs,paddingLeft:e.spacing.sm,paddingTop:e.spacing.sm/2,zIndex:1},gridDiv:{alignItems:"center",justifyContent:"center",marginTop:"10px"},gridDivBtn:{marginTop:"16px"}}}));function Z(){var e=E(),t=e.classes,n=e.theme,a=(0,s.useState)([]),u=a[0],h=a[1],g=(0,s.useState)(null),b=g[0],S=g[1],T=(0,s.useState)(!1),v=(T[0],T[1],(0,s.useState)(0)),N=v[0],w=v[1],F=(0,s.useState)(0),_=F[0],C=F[1],Z=(0,s.useState)(0),W=Z[0],O=Z[1],B=(0,s.useState)(0),D=B[0],A=B[1],P=(0,s.useState)(0),L=P[0],Y=P[1],q=u.map((function(e){var r=e.maxSupply-e.totalSupply,a=100*e.totalSupply/Math.max(1,e.maxSupply),i=100-a;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:e.type}),(0,o.jsx)("td",{children:e.price}),(0,o.jsx)("td",{children:e.maxSupply?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(c.Z,{position:"apart",children:[(0,o.jsxs)(p.x,{size:"xs",color:"teal",weight:700,children:[e.totalSupply," using"]}),(0,o.jsxs)(p.x,{size:"xs",color:"red",weight:700,children:[r," left"]})]}),(0,o.jsx)(d.E,{classNames:{bar:t.progressBar},sections:[{value:a,color:"dark"===n.colorScheme?n.colors.teal[9]:n.colors.teal[6]},{value:i,color:"dark"===n.colorScheme?n.colors.red[9]:n.colors.red[6]}]})]}):"no supply"}),(0,o.jsx)("td",{children:e.balance})]},e.type)})})),H=function(){var e=(0,r.Z)(i().mark((function e(){var t,n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=parseInt(W.toString()),n=parseInt(D.toString()),console.log("normal",t),console.log("special",n),console.log("wallet",L),!(t<0||n<0||t+n==0)){e.next=8;break}return M().fire("Error!","Transfer Number Should Be Positive.","error"),e.abrupt("return");case 8:if(0!=L){e.next=11;break}return M().fire("Error!","Wallet cannot be empty.","error"),e.abrupt("return");case 11:return r=z._NFT.transferNFT(t,n,L),e.prev=12,e.next=15,r;case 15:if(0!=(a=e.sent).status){e.next=20;break}M().fire("Error!","Action failed","error"),e.next=23;break;case 20:return e.next=22,a.wait();case 22:M().fire("Awesome!","You transfered NFTs!","success");case 23:e.next=34;break;case 25:if(e.prev=25,e.t0=e.catch(12),4001,4001!==e.t0.code){e.next=33;break}return M().fire("Error!","You rejected transaction.","error"),e.abrupt("return");case 33:M().fire("Error!","Something went wrong.","error");case 34:case"end":return e.stop()}}),e,null,[[12,25]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=(0,r.Z)(i().mark((function e(){var t,n,r,a,o,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=parseInt(N.toString()),n=parseInt(_.toString()),r=-1,a=-1,u.forEach((function(e,t){"NormalNFT"==e.type?r=e.price:"SpecialNFT"==e.type&&(a=e.price)})),-1!=r){e.next=7;break}return console.log("not received price data"),e.abrupt("return");case 7:return o=new I("".concat(o=t*r+n*a,"e18")),s=z._NFT.verifyNFT(t,n,{value:o.toString(),from:b}),e.prev=10,e.next=13,s;case 13:if(0!=(l=e.sent).status){e.next=18;break}M().fire("Error!","Action failed","error"),e.next=21;break;case 18:return e.next=20,l.wait();case 20:M().fire("Awesome!","You bought NFTs!","success");case 21:e.next=32;break;case 23:if(e.prev=23,e.t0=e.catch(10),4001,4001!==e.t0.code){e.next=31;break}return M().fire("Error!","You rejected transaction.","error"),e.abrupt("return");case 31:M().fire("Error!","Something went wrong.","error");case 32:case"end":return e.stop()}}),e,null,[[10,23]])})));return function(){return e.apply(this,arguments)}}();return(0,o.jsxs)(l.Z,{children:[(0,o.jsxs)(m.x,{children:[(0,o.jsx)(k,{onStatus:function(e){h(e.Info),S(e.account)}}),(0,o.jsxs)(f.i,{sx:{minWidth:800},verticalSpacing:"xs",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Type"}),(0,o.jsx)("th",{children:"Price"}),(0,o.jsx)("th",{children:"Supply"}),(0,o.jsx)("th",{children:"Balance"})]})}),(0,o.jsx)("tbody",{children:q})]})]}),(0,o.jsxs)(y.M,{cols:4,breakpoints:[{maxWidth:"xl",cols:4},{maxWidth:"md",cols:4},{maxWidth:"sm",cols:2}],className:t.gridDiv,children:[(0,o.jsx)(j,{onChange:w,label:"Normal NFT",placeholder:"Input an number."}),(0,o.jsx)(j,{onChange:C,label:"Special NFT",placeholder:"Input an number."}),(0,o.jsx)("div",{}),(0,o.jsx)(x.z,{onClick:J,className:t.gridDivBtn,children:"Buy NFT"})]}),(0,o.jsxs)(y.M,{cols:4,breakpoints:[{maxWidth:"xl",cols:4},{maxWidth:"md",cols:4},{maxWidth:"sm",cols:2}],className:t.gridDiv,children:[(0,o.jsx)(j,{onChange:O,label:"Normal NFT",placeholder:"Input an number."}),(0,o.jsx)(j,{onChange:A,label:"Special NFT",placeholder:"Input an number."}),(0,o.jsx)(j,{onChange:Y,label:"Wallet Address",placeholder:"Input an wallet address."}),(0,o.jsx)(x.z,{onClick:H,className:t.gridDivBtn,children:"Transfer NFT"})]})]})}}},function(e){e.O(0,[23,679,739,774,888,179],(function(){return t=78364,e(e.s=t);var t}));var t=e.O();_N_E=t}]);